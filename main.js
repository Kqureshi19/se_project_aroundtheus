!function(){"use strict";class e{constructor(e,t,s,o,r){let{name:n,link:i,_id:l,isLiked:a}=e;this._name=n,this._link=i,this._id=l,this._isLiked=a,this._cardSelector=t,this._handleImageClick=s,this._handleCardDeleteClick=o,this._handleCardLike=r}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{console.log(this._handleCardLike),this._handleCardLike(this)})),this._cardElement.querySelector(".card__trash-button").addEventListener("click",(()=>{this._handleCardDeleteClick(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}changeLikeButtonState(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}setIsLiked(e){this._isLiked=e,this.changeLikeButtonState()}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_getElement(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getElement(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this.changeLikeButtonState(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._cardElement}}var t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._submitButton=t.querySelector(e.submitButtonSelector),console.log("formElement is: ",this._form)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}resetForm(){this._form.reset(),this._disableButton()}_toggleButtonState(){this._hasInvalidInput(this._inputElements)?this._disableButton():this._enableButton()}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_setEventListeners(){this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class s{constructor(e){let{popupSelector:t}=e;console.log(t),this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}class o extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._submitButton=this._popupForm.querySelector(".modal__save-button")}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e={};return this._inputValues=this._popupForm.querySelectorAll(".modal__input"),this._inputValues.forEach((t=>{e[t.name]=t.value})),e}setLoading(e){this._submitButton.textContent=e?"Saving...":"Save"}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}class r{constructor(e,t){let{items:s,renderer:o}=e;this._items=s,this._renderer=o,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}const n={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},i=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._handleResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._handleResponse)}updateUserInfo(e){let{name:t,about:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._handleResponse)}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._handleResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleResponse)}setUserAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._handleResponse)}setLiked(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._handleResponse)}removeLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._handleResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"7d078757-23ed-414e-a9d7-d63a6269c72c","Content-Type":"application/json"}});i.getUserInfo().then((e=>{console.log("res:",e),console.log("res.name: ",e.name),console.log("res.about: ",e.about),C.setUserAvatar(e.avatar),C.setUserInfo(e.name,e.about)})).catch((e=>{console.error(e),alert(`${e}`)})),document.querySelector("#card-template").content.firstElementChild;const l=document.querySelector("#profile-edit-button"),a=document.querySelector("#profile-edit-modal"),c=document.querySelector("#add-card-modal"),d=document.querySelector("#preview-card-modal"),h=(document.querySelector(".modal__preview-image"),a.querySelector("#profile-edit-modal-close-button"),c.querySelector("#add-card-modal-close-button")),u=d.querySelector("#preview-card-modal-close-button"),_=document.querySelector(".profile__add-button"),m=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),p=document.querySelector("#profile-description-input"),v=document.forms["profile-edit-form"],E=document.forms["add-card-form"],f=document.forms["avatar-edit-form"];console.log(f),document.querySelector(".cards__list"),E.querySelector(".modal__input_type_title"),E.querySelector(".modal__input_type_link"),new t(n,v).enableValidation();const g=new t(n,E);function L(t){return new e(t,"#card-template",y,B,w).getView()}g.enableValidation(),new t(n,f).enableValidation();const S=new o("#add-card-modal",(function(e){console.log(3333333,e),S.setLoading(!0),i.addCard(e).then((e=>{const t=L(e);I.addItem(t),S.close()})).catch((e=>{console.error(e),alert(`${e}`)})).finally((()=>{S.setLoading(!1)}))}));S.setEventListeners();const k=new o("#profile-edit-modal",(function(e){k.setLoading(!0),console.log("inputValues:",e),i.updateUserInfo(e).then((e=>{C.setUserInfo(e.name,e.about),k.close()})).catch((e=>{console.error(e),alert(`${e}`)})).finally((()=>{k.setLoading(!1)}))}));k.setEventListeners();const b=new class extends s{constructor(e){super({popupSelector:e}),console.log("PopupSelector is: ",e),this._cardImageElement=this._popupElement.querySelector(".modal__preview-image"),this._modalCaption=this._popupElement.querySelector(".modal__caption")}open(e){console.log("modal Caption"),this._cardImageElement.src=e.link,this._cardImageElement.alt=e.name,this._modalCaption.textContent=e.name,console.log(this._modalCaption.textContent),console.log("the alt text is:",this._cardImageElement.alt),super.open()}}("#preview-card-modal");function y(e){b.open(e)}b.setEventListeners();const C=new class{constructor(e,t,s){this._profileNameElement=document.querySelector(e),this._profileDescriptionElement=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{name:this._profileNameElement.textContent,description:this._profileDescriptionElement.textContent}}setUserInfo(e,t){this._profileNameElement.textContent=e,this._profileDescriptionElement.textContent=t}setUserAvatar(e){this._avatar.src=e}}(".profile__title",".profile__description",".profile__image");let I;l.addEventListener("click",(()=>{!function(){const e=C.getUserInfo();console.log("profileTitleInput.value:"+m.value),m.value=e.name,p.value=e.description,console.log("profileTitleInput.value: "+m.value)}(),k.open()})),_.addEventListener("click",(()=>{g.resetForm(),S.open()})),h.addEventListener("click",(()=>S.close())),u.addEventListener("click",(()=>b.close())),i.getInitialCards().then((e=>{I=new r({items:e,renderer:e=>{I.addItem(L(e))}},".cards__list"),I.renderItems()})).catch((e=>{console.error(e),alert(`${e}`)}));const q=new class extends s{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupForm.querySelector(".modal__save-button")}setSubmitAction(e){this._handleFormSubmit=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}setLoading(e){this._submitButton.textContent=e?"Yes":"Deleting..."}}("#delete-confirmation-modal");function B(e){q.setLoading(!0),q.open(),q.setSubmitAction((()=>{i.deleteCard(e._id).then((()=>{e.handleDeleteCard(),q.close()})).catch((e=>{console.error(e),alert(`${e}`)})).finally((()=>{q.setLoading(!1)}))}))}q.setEventListeners(),document.querySelector(".editicon").addEventListener("click",(()=>{console.log("you clicked on editAvatarButton"),U.open()}));const U=new o("#edit-avatar-modal",(function(e){U.setLoading(!0),i.setUserAvatar(e.url).then((t=>{console.log("res:",t),console.log("_getInputValues.url:",e.url),C.setUserAvatar(e.url),U.close()})).catch((e=>{console.error(e),alert(`${e}`)})).finally((()=>{U.setLoading(!1)}))}));function w(e){console.log("testing Like 123!"),console.log("this:",this),console.log("card is liked:",e._isLiked),console.log("card is unliked:",!e._isLiked),console.log("this._name:",this._name,"this._isLiked:",this._isLiked),e._isLiked?i.removeLike(e._id).then((t=>{console.log("res",t),console.log("res.isLiked:",t.isLiked),e.setIsLiked(t.isLiked)})).catch((e=>{console.error(e),alert(`${e}`)})):i.setLiked(e._id).then((t=>{console.log("res:",t),console.log("res.isLiked:",t.isLiked),e.setIsLiked(t.isLiked)})).catch((e=>{console.error(e),alert(`${e}`)}))}U.setEventListeners(),console.log("testing98")}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBTSxJQXJCbkJwQyxFQUNHOEIsU0FBUzhCLEVBQUt2SyxLQUNkMEgsTUFBTVQsSUFDTG5HLFFBQVFDLElBQUksT0FBUWtHLEdBQ3BCbkcsUUFBUUMsSUFBSSxlQUFnQmtHLEVBQUloSCxTQUNoQ3NLLEVBQUtqSixXQUFXMkYsRUFBSWhILFFBQVEsSUFFN0I2SSxPQUFPQyxJQUNOakksUUFBUWtJLE1BQU1ELEdBQ2RFLE1BQU8sR0FBRUYsSUFBTSxHQWV2QixDQWhFQTRDLEVBQWdCM0csb0JBNkVoQmxFLFFBQVFDLElBQUksWSIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQVBJLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvL0NsYXNzIENhcmQgd2lsbCBoYXZlIDMgcGFyYW1ldGVycywgMS4gZGF0YSAyLiBjYXJkU2VsZWN0b3IgMy4gaGFuZGxlSW1hZ2VDbGlja1xuLy9nZXR2aWV3KCkgaXMgdGhlIGVudHJ5IHBvaW50LCBpdCBpcyB0aGUgb25seSBwdWJsaWMgbWV0aG9kIGluIHRoaXMgY2xhc3NcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZCB9LFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZUNhcmREZWxldGVDbGljayxcbiAgICBoYW5kbGVDYXJkTGlrZVxuICApIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9pZCA9IF9pZDtcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7IC8vdGhpcyBpcyB0aGUgdGVtcGxhdGUgb2YgdGhlIGNhcmQsIGkuZSBjYXJkU2VsZWN0b3IgPSAjY2FyZC10ZW1wbGF0ZVxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGVDbGljayA9IGhhbmRsZUNhcmREZWxldGVDbGljaztcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSA9IGhhbmRsZUNhcmRMaWtlO1xuXG4gICAgLy8gdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRFbGVtZW50KCk7XG4gICAgLy8gdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICAvLyB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIC8vIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIC8vdGhpcy5jaGFuZ2VMaWtlQnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIC8vIHNldExpa2VCdXR0b25TdGF0ZSgpIHtcbiAgLy8gICBpZiAoKGlzTGlrZWQgPSB0cnVlKSkge1xuICAvLyAgICAgdGhpcy5jaGFuZ2VMaWtlQnV0dG9uU3RhdGUoKTtcbiAgLy8gICB9XG4gIC8vIH1cblxuICAvL1NldCB0aGUgRXZlbnQgTGlzdGVuZXJzIGZvciB0aGUgZm9sbG93aW5nICgzKTpcbiAgLy8xLiBMaWtlIEJ1dHRvblxuICAvLzIuIERlbGV0ZSBCdXR0b25cbiAgLy8zLiBQcmV2aWV3IEltYWdlXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvL1wiLmNhcmRfX2xpa2UtYnV0dG9uXCIgdGhpcy5fY2hhbmdlTGlrZUJ1dHRvblN0YXRlKClcbiAgICAvLzEtSGFuZGxlIHRoZSBMaWtlIEJ1dHRvblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX2hhbmRsZUNhcmRMaWtlKTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZExpa2UodGhpcyk7XG4gICAgICAgIC8vdGhpcy5jaGFuZ2VMaWtlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuXG4gICAgLy8yLUhhbmRsZSB0aGUgRGVsZXRlIEJ1dHRvblxuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAvLyB0aGlzIGlzIGRvbmUgbG9jYWxseSwgc3Vic2VxdWVudCBsaW5lIGlzIGRlbGV0ZWQgb24gc2VydmVyLS10aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgICAgIC8vZGVidWdnZXI7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGVDbGljayh0aGlzKTtcbiAgICAgIH0pO1xuICAgIC8vIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIC8vIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIC8vMy1IYW5kbGUgdGhlIENsaWNrIEltYWdlIEJ1dHRvbiBpLmUuIFByZXZpZXcgQ2FyZCBDbGlja1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XG4gICAgfSk7XG4gIH1cbiAgLy8gY2hhbmdlIHNldExpa2VJY29uIHRvIGNoYW5nZUxpa2VCdXR0b25TdGF0ZVxuICBjaGFuZ2VMaWtlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2lzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8vZnlpLCBjYXJkZWxlbWVudCBpcyB0aGUgY3VycmVudCBjYXJkIHdlIGFyZSB3b3JraW5nIHdpdGhcbiAgc2V0SXNMaWtlZChpc0xpa2VkKSB7XG4gICAgLy8gLy9jb25zb2xlLmxvZyhcIlByZXNzaW5nIExpa2UgQnV0dG9uIGZyb20gIGNhcmQgY2xhc3NcIik7XG4gICAgLy8gdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAvLyAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgLy8gICAuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICAvLyAvL3RoaXMuX2NhcmRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XG4gICAgLy90aGlzLl9pc0xpa2VkID0gIXRoaXMuX2lzTGlrZWQ7XG4gICAgdGhpcy5jaGFuZ2VMaWtlQnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIGhhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX2dldEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICAvL1B1YmxpYyBNZXRob2Qtc2luY2UgeW91IGNhbiBhY2Nlc3MgaXQgb3V0c2lkZSBpdHMgY2xhc3NcbiAgLy90aGlzIGlzIHRoZSBlbnRyYW5jZSBwb2ludCB0byB5b3VyIGNhcmQsIHdoaWNoIHdpbGwgYmUgdXNlZC9jYWxsZWQgaW4gaW5kZXguanNcbiAgLy8xLkdyYWIgdGhlIHRlbXBsYXRlIGZpcnN0IGFuZCBjbG9uZSBpdCAoaS5lIGNhcmRTZWxlY3RvciA9ICNjYXJkLXRlbXBsYXRlKVxuICAvLzIuIEFkZCBkYXRhIHRvIHRoZSB0ZW1wbGF0ZSBjbG9uZSAmIGNhbGwgc2V0RXZlbnRMaXN0ZXJzbigpIG1ldGhvZCBhbmQgcmV0dXJuIG5ldyBjYXJkXG4gIGdldFZpZXcoKSB7XG4gICAgLy90aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7IC8vdGhpcyBpcyB0aGUgdGVtcGxhdGUgb2YgdGhlIGNhcmQsIGkuZSBjYXJkU2VsZWN0b3IgPSAjY2FyZC10ZW1wbGF0ZVxuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRFbGVtZW50KCk7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuY2hhbmdlTGlrZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICAvL2NvbnNvbGUubG9nKFwicmlnaHQgaGVyZVwiKTtcbiAgICAvL2NvbnNvbGUubG9nKFwiY2FyZFNlbGVjdG9yOiBcIiwgdGhpcy5fY2FyZFNlbGVjdG9yKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIC8vdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRFbGVtZW50KCk7XG5cbiAgICAvL2NvbnNvbGUubG9nKGNhcmRFbGVtZW50KTtcbiAgICAvL1RoaXMgd2lsbCBhZGQgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMgd2hlbiB0aGUgY2FyZCBpcyBjcmVhdGVkXG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIC8vMS1nZXQgdGhlIGNhcmQgdmlld1xuICAgIC8vMi1zZXQgZXZlbnQgbGlzdGVuZXJzLXdlIGFyZSBpbnZva2luZyBhIG1ldGhvZCwgc28gd2UgYXJlIHVzaW5nIHRoaXNcbiAgICAvL3RoZXJlIHdpbGwgYmUgMyBldmVudCBsaXN0ZW5ycywgbGlrZSBidXR0b24sIGRlbGV0ZSBidXR0b24sIHByZXZpZXcgaW1hZ2VcbiAgICAvLzMtcmV0dXJuIHRoZSBjYXJkXG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAvL2NyZWF0ZSBjb25zdHJ1Y3RvciBhbmQgY29weSBldmVyeXRoaW5nIGZyb20gdmFsaWRhdGUuanMgZXhjZXB0IGZvcm1TZWxlY3RvciBzaW5jZSBmb3JtRWxlbWVudCBpcyB1c2VkIGluc3RlYWRcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG5cbiAgICAvL3RoaXMgd2lsbCBsb2cgdGhlIENsYXNzIGl0c2VsZioqKlxuICAgIC8vY29uc29sZS5sb2coXCJzZXR0aW5nc1wiLCBzZXR0aW5ncyk7XG4gICAgLy9jb25zb2xlLmxvZyhcInRlc3R0aGlzXCIsIHRoaXMuX2lucHV0RWxlbWVudHMpO1xuICAgIGNvbnNvbGUubG9nKFwiZm9ybUVsZW1lbnQgaXM6IFwiLCB0aGlzLl9mb3JtKTtcbiAgfVxuICAvL3RoaXMgd2lsbCBiYXNpY2FsbHkgdG9nZ2xlIHRoZSBlcnJvci1yZWZhY3RvcmVkKipcbiAgLy9mb3JtRWxlbWVudCBiZWNvbWVzIHRoaXMuX2Zvcm1cbiAgLy8qKklmIGl0cyBvbiB0aGUgY29uc3RydWN0b3IgaW4gdGhlIG1ldGhvZHMsIGFkZCB0aGUgJ3RoaXMnIGtleXdvcmQgKi9cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgLy9jb25zb2xlLmxvZyhlcnJvck1lc3NhZ2VFbGVtZW50KTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7IC8vZXJyb3JNZXNzYWdlID1pbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG4gIC8vbm90ZSB0aGlzIGRvZXMgbm90IGhhdmUgYW4gZXJyb3IgbWVzc2FnZSBwYXJhbWF0ZXIsIGl0IGp1c3QgaGlkZXMgaXRcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcbiAgICApO1xuICB9XG4gIC8vcmVtb3ZlIHN1Ym1pdGJ1dHRvbixpbmFjdGl2ZWJ1dHRvbmNsYXNzIHNpbmNlIGl0cyBiZWVuIGRlZmluZWQgaW4gdGhlIGNvbnN0cnVjdG9yXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXNldEZvcm0oKSB7XG4gICAgLy8gaWYgeW91IHVwZGF0ZSB0aGlzLl9pbnB1dEVsZW1lbnRzLCB5b3UgbWlnaHQgY2hhbmdlIHRoZSBfdG9nZ2xlQnV0dG9uU3RhdGUgc2NlbmFyaW9cbiAgICAvLyB0aXA6IHlvdSBuZWVkIHRvIHJ1biB0aGlzIGZ1bmMgd2hlbiB5b3Ugb3BlbiBPUiBjbG9zZSBtb2RhbFxuICAgIC8vY29uc29sZS5sb2coXCJ0b2dnbGVCdXR0b25EU3RhdGVQdWJsaWNNZXRob2QgVGVzdGluZ1wiKTtcbiAgICAvL2NvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmQtZm9ybVwiXTtcbiAgICAvL3RoaXMuX2FkZENhcmRGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmQtZm9ybVwiXTtcbiAgICAvL3RoaXMuX2FkZENhcmRGb3JtRWxlbWVudC5yZXNldCgpO1xuICAgIC8vdGhpcy5faW5wdXRTZWxlY3Rvci50ZXh0Q29udGVudC5yZXNldCgpO1xuICAgIC8vdGhpcy5faW5wdXRFbGVtZW50cy5yZXNldCg7KVxuICAgIC8vdGhpcy5pbnB1dEVsZW1lbnQucmVzZXQoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICB9XG5cbiAgLy9yZW1vdmVkIHBhcmFtdGVycyB0aGF0IHdlcmUgZGVjbGFyZWQgd2l0aGluIHRoaXMgY2xhc3MgYWxyZWFkeVxuICAvL2lucHV0RWxlbWVudHMgaXMgcmVtb3ZlZCBmcm9tIHRoZSBwYXJhbWV0ZXJzIGIuYyBpdHMgZGVjbGFyZWQgZXZlbiB0aG91Z2ggaXRzIG5vdCBpbiB0aGUgY29udHJ1Y3RvclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgLy9jb25zb2xlLmxvZyhcInRlc3RpbmcxMjExXCIsIHRoaXMuX3N1Ym1pdEJ1dHRvbik7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVsZW1lbnRzKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgICB9XG4gIH1cbiAgLy9yZW1vdmUgZXZlcnl0aGluZyBlZHhjZXB0IGlucHV0ZWxlbWVudCBmcm9tIHBhcmFtZXRlclxuICAvL2IvYyBpdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgY29uc3RydWN0b3JcbiAgLy9yZWZhY3RvcmVkKipcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgLy9yZW1vdmUgb3B0aW9ucyBzaW5jZSBjb25zdHJ1Y3RvciBhbHJlYWR5IGhhcyB0aGVzZT9cbiAgLy9hbGwgZnVuY3Rpb25zIGluc2lkZSBtZXRob2RzIG5lZWQgYSB0aGlzP1xuICAvL29ubHkgYXJndW1lbnQgdGhhdCBpcyBuZWVkZWQgaW4gaW5wdXRFbGVtZW50XG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIC8vdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7IC8vY2FuIHJlbW92ZSB0aGUgcGFyYW10ZXJzIGFuZCBhZGQgdGhpcyBzaW5jZSB5b3UgYXJlIGNhbGxpbmcgaXQgd2l0aGluIHRoZSBjbGFzc1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgLy9uZWVkIGlucHV0RWxlbWVudCBhcyBzdGFuZGFsb25lXG5cbiAgLy9wdWJsaWMgbWV0aG9kIHRoYXQgYWN0aXZhdGVzIHRoZSB2YWxpZGF0aW9uIG9mIHRoZSBnZW5lcmF0ZWQgZm9ybVxuICAvL3BsYXlzIHRoZSByb2xlIG9mIGluaXQgbWV0aG9kIChpdHMgcHVibGljKVxuICAvL1dpbGwgYmUgY2FsbGVkIGJ5IHRoZSAyIGZvcm0gbWV0aG9kcyBvbiBpbmRleC5qc1xuICAvL2Fsc28gcmVtb3ZpbmcgdGhlIGxvb3BzIHNpbmNlIHRoYXQgaXMgaGFuZGxlZCBpbiBpbmRleC5qcywgb25jZSBwZXIgdW5pcXVlIGZvcm1cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbi8vY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZWRpdEZvcm0pO1xuLy9lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4vL2NvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgYWRkRm9ybSk7XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCIvL3BvcHVwU2VsZWN0b3IgaWRlbnRpZmllcyB3aGljaCBwb3B1cCB3ZSBhcmUgd29ya2luZyB3aXRoXG4vL3dpbGwgYmUgcmVzcG9uc2libGUgZm9yIG9wZW5pbmcvY2xvc2luZyBhbGwgdGhlIHBvcHVwcyBpbiB5b3VyIGFwcGxpY2F0aW9uXG4vL3RoZXNlIGFyZSBhbHJlYWR5IGRlZmluZWQgaW4gaW5kZXguanMtanVzdCBuZWVkIHRvIGZpbmQgdGhlbVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIGNvbnNvbGUubG9nKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIC8vbGlzdGVucyBmb3IgZXNjIGJ1dHRvblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLy9zZXRzIGV2ZW50IGxpc3RlbmVyc1xuICAvL2NyZWF0ZSBhbiBldmVudCBsaXN0ZW5lciBmb3IgY2xpY2sgb24gdGhlIENMT1NFIGJ1dHRvbiBvciBwb3B1cCBoYWxmLXRyYW5zcGFyZW50IGJhY2tncm91bmRcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikgfHxcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8vY2hpbGQgY2xhc3Mgb2YgcG9wdXAgY2xhc3Ncbi8vcmVtZW1iZXItc3VwZXIgcmVmZXJzIHRvIHRoZSBwYXJlbnQgY2xhc3Ncbi8vY3JlYXRlIGluc3RhbmNlIG9mIFBvcHVwV2l0aEZvcm0gY2xhc3MgZm9yIGVhY2ggcG9wdXAgdGhhdCBjb250YWlucyBhIGZvcm1cbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiKTtcbiAgfVxuICAvL2NhbiByZW1vdmUgdGhpcyAxMy0xNlxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG5cbiAgLy9jb2xsZWN0cyBkYXRhIGZyb20gYWxsIGlucHV0IGZpZWxkcyBhbmQgcmV0dXJucyBpdCBhcyBhbiBvYmplY3RcbiAgLy9UaGlzIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBzdWJtaXNzaW9uIGhhbmRsZXIgYXMgYW4gYXJndW1lbnRcbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGZvcm1EYXRhT2JqID0ge307IC8vY3JlYXRlIGVtcHR5IG9iamVjdFxuICAgIHRoaXMuX2lucHV0VmFsdWVzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpOyAvL2NhbiBwcm9iYWJseSBtb3ZlIHRvIGNvbnN0cnVjdG9yP1xuICAgIHRoaXMuX2lucHV0VmFsdWVzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgZm9ybURhdGFPYmpbaW5wdXRFbGVtZW50Lm5hbWVdID0gaW5wdXRFbGVtZW50LnZhbHVlOyAvL2FkZCBhIGZpZWxkbmFtZTpmaWVsZHZhbHVlIHBhaXIgYXMgYW4gb2JqZWN0XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvcm1EYXRhT2JqOyAvL3JldHVybnMgZGF0YSBhcyBhbiBvYmplY3RcbiAgfVxuXG4gIC8vcHVibGljIG1ldGhvZCB0aGF0IHdpbGwgYmUgdXNlZCBieSB0aGUgcG9wdXBzIGluIGluZGV4LmpzXG4gIC8vdG8gaW5kaWF0ZSBpdCBpcyAnc2F2aW5nJyB0aGUgaW5mb3JtYXRpb24gb24gdGhlIG1vZGFsL3BvcHVwXG4gIHNldExvYWRpbmcoaXNMb2FkaW5nKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XG4gICAgfVxuICB9XG5cbiAgLy9vdmVycmlkZXMgc2V0RXZlbnRMaXN0ZW5lcnMoKSBwYXJlbnQgbWV0aG9kXG4gIC8vU2hvdWxkIGFkZCBhIHN1Ym1pdCBldmVudCBsaXN0ZW5lciB0byB0aGUgZm9ybSAmIGNhbGwgdGhlIHNldEV2ZW50TGlzdGVuZXJzKCkgb2YgdGhlIHBhcmVudCBjbGFzc1xuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICAvL3N1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cblxuLyppbmRleC5qc1xuXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtY2FyZC1tb2RhbFwiLCAoKSA9PiB7fSk7XG5uZXdDYXJmZFBvcHVwLm9wZW4oKTtcblxubmV3Q2FyZmRQb3B1cC5jbG9zZSgpOyAqL1xuIiwiLy9TZWN0aW9uIGNsYXNzIGlzIGEgdXRpbGl0eSBjbGFzcyB0aGF0IHNlcnZlcyBhIHNwZWNpZmljIHB1cnBvb3NlXG4vL3B1cnBvc2U6IGFkZCBlbGVtZW50cyB0byB0aGUgRE9NXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7IC8vIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcy9hZGRzIHNpbmdsZSBpdGVtIHRvIGEgcGFnZVxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpOyAvL0NTUyBjbGFzcyBzZWxlY3Rvciwgd2hlcmUgeW91IGFkZCB0aGUgY2FyZCBlbGVtZW50c1xuICB9XG5cbiAgLy9yZW5kZXJzIGFsbCB0aGUgZWxlbWVudHMgb24gdGhlIHBhZ2VcbiAgLy9jYWxsZWQgb25jZSBwZXIgcGFnZSBsb2FkXG4gIC8vaXMgaXRlbXMgcGFyYW10ZXIgb3B0aW9uc2FsP1xuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vdGFrZXMgRE9NIGVsZW1lbnQgJiBhZGRzIGl0IHRvIHRoZSBjb250YWluZXJcbiAgLy8qKnNob3VsZCBiZSBjYWxsZWQgd2hlbiBhZGRpbmcgYW4gaW5kaXZpZHVhbCBjYXJkIHRvIHRoZSBET00gKi9cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgLy9jb25zb2xlLmxvZyhcImVsZW1lbnQgaXM6XCIgKyBlbGVtZW50KTtcbiAgfVxufVxuIiwiLy8xLUluaXRpYWwgQ2FyZHNcbi8vMi1TZXR0aW5ncyBPYmplY3RcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnIFwiLFxuICB9LFxuXTtcblxuLy9zZXR0aW5ncyBvYmplY3RcblxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuLy9tb2RhbCBjb25maWctLS0tIGFkZCBjYXJkLyBlZGl0IGNhcmQvIHByZXZpZXcgaW1hZ2UgY2FyZFxuY29uc3QgbW9kYWxDb25maWcgPSB7XG4gIGVkaXRNb2RhbEZvcm1TZWxlY3RvcjogXCIuZWRpdC1tb2RhbFwiLFxuICBhZGRNb2RhbEZvcm1TZWxlY3RvcjogXCIuZWRpdC1tb2RhbFwiLFxuICBwcmV2aWV3TW9kYWxGb3JtU2VsZWN0b3I6IFwiLmVkaXQtbW9kYWxcIixcbn07XG4vL3Byb2ZpbGUgY29uZmlnLS10YWtlcyBpbiAyIHBycGVydHkgLS1wcm9maWxlIG5hbWUgYW5kIGRlc2NyaXB0aW9uIHNlbGVjdG9yLS0tLVxuY29uc3QgcHJvZmlsZUNvbmZpZyA9IHtcbiAgbmFtZVNlbGVjdG9yOiBcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIsXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6IFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIixcbn07XG4vL2NhcmRzIGNvbmZpZy0tLWNvbnRhaW5lciBzZWxlY3Rvci9jYXJkIHRlbXBsYXRlIHNlbGVjdG9yXG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQVBJIGZyb20gXCIuLi9jb21wb25lbnRzL0FQSS5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBzZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XG5cbi8vVGhpcyBpcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgQVBJIGNsYXNzXG5jb25zdCBhcGkgPSBuZXcgQVBJKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI3ZDA3ODc1Ny0yM2VkLTQxNGUtYTlkNy1kNjNhNjI2OWM3MmNcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuLy9jb25zb2xlLmxvZyhcInRlc3RpbmchISFcIik7XG4vL2FwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChyZXMpID0+IGNvbnNvbGUubG9nKHJlcykpO1xuLy9hcGkuZ2V0VXNlckluZm8oKS50aGVuKChyZXMpID0+IGNvbnNvbGUubG9nKFwiVXNlciBJbmZvIGlzOiBcIiwgcmVzKSk7XG5cbmFwaVxuICAuZ2V0VXNlckluZm8oKVxuICAudGhlbigocmVzKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJyZXM6XCIsIHJlcyk7XG4gICAgY29uc29sZS5sb2coXCJyZXMubmFtZTogXCIsIHJlcy5uYW1lKTtcbiAgICBjb25zb2xlLmxvZyhcInJlcy5hYm91dDogXCIsIHJlcy5hYm91dCk7XG5cbiAgICAvL3VwZGF0ZSB0aGUgYXZhdGFyIHdoZW4geW91IHJlZnJlc2ggdGhlIHBhZ2VcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuYWJvdXQpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICBhbGVydChgJHtlcnJ9YCk7XG4gIH0pO1xuXG4vLyBhcGkudXBkYXRlVXNlckluZm8ocmVzKS50aGVuKChyZXMpID0+IHtcbi8vICAgY29uc29sZS5sb2coXCJVc2VyIEluZm8gaXM6IFwiLCByZXMpO1xuLy8gICBVc2VySW5mby5zZXRVc2VySW5mbyhyZXMubmFtZSwgcmVzLmRlc2NyaXB0aW9uKTtcbi8vIH0pO1xuXG4vL2FwaS5nZXRVc2VySW5mbygpLnRoZW4odXNlckluZm8pOyAvLz0+e1xuLy8gICBjb25zb2xlLmxvZyhcIlRoZSBVc2VyIEluZm8gaXMgOlwiKyB1c2VySW5mbyk7XG4vLyB9XG4vL0NyZWF0ZSBpbnN0YW5jZXMgb2YgdGhlIGNsYXNzZXNcbi8vY29uc3QgQ2FyZFByZXZpZXcgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoc2VsZWN0b3JzLnByZXZpZXdDYXJkTW9kYWwpO1xuXG4vL2NvbnNvbGUubG9nKHR5cGVvZiBpbml0aWFsQ2FyZHMpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXJkLUNhcmQgQ2xhc3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vL0luc3RhbnRpYXRlIG9yIG1ha2UgYSBjb3B5IG9mIHRoZSBDYXJkIENsYXNzIGFuZCBwYXNzIGNhcmREYXRhIGFuZCB0aGUgdGVtcGxhdGUgdG8gaXRcbi8vVGhlbiBjYWxsIGdldFZpZXcoKSBtZXRob2QgZnJvbSB0aGUgY2xhc3MtI2NhcmQtdGVtcGxhdGVcbi8vY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIpO1xuLy9jYXJkLmdldFZpZXcoKTtcbi8vV2UgYXJlIGdyYWJiaW5nIHRoZSB0ZW1wbGF0ZVxuLy9jb25zdCBjYXJkU2VsZWN0b3IgPSBcIiNjYXJkLXRtcGxhdGVcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsaWRhdGlvbi1Gb3JtIFZhbGlkYXRvciBDbGFzcyAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vL3RoZXNlIGV4aXN0IGFscmVhZHlcbi8vY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWVkaXQtZm9ybVwiXTtcbi8vY29uc3QgYWRkQ2FyZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJhZGQtY2FyZC1mb3JtXCJdO1xuLypjb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG4gIHByb2ZpbGVFZGl0Rm9ybVxuKSBcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBhZGRDYXJkRm9ybUVsZW1lbnRcbik7ICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhcmQgVGVtcGxhdGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5jb25zdCBjYXJkVGVtcGxhdGUgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3Q2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWNhcmQtbW9kYWxcIik7XG5jb25zdCBtb2RhbFByZXZpZXdJbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9fcHJldmlldy1pbWFnZVwiXG4pO1xuXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsQ2xvc2VCdXR0b24gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbC1jbG9zZS1idXR0b25cIlxuKTtcblxuY29uc3QgYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjYWRkLWNhcmQtbW9kYWwtY2xvc2UtYnV0dG9uXCJcbik7XG5jb25zdCBwcmV2aWV3Q2FyZE1vZGFsQ2xvc2VCdXR0b24gPSBwcmV2aWV3Q2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3ByZXZpZXctY2FyZC1tb2RhbC1jbG9zZS1idXR0b25cIlxuKTtcblxuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcblxuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuLy9jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZWRpdC1mb3JtXCJdO1xuLy9jb25zdCBhZGRDYXJkRm9ybUVsZW1lbnQgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmQtZm9ybVwiXTtcbmNvbnN0IGF2YXRhckVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJhdmF0YXItZWRpdC1mb3JtXCJdO1xuY29uc29sZS5sb2coYXZhdGFyRWRpdEZvcm0pO1xuY29uc3QgY2FyZHNXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuY29uc3QgY2FyZFRpdGxlSW5wdXQgPSBhZGRDYXJkRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2lucHV0X3R5cGVfdGl0bGVcIlxuKTtcbmNvbnN0IGNhcmRVUkxJbnB1dCA9IGFkZENhcmRGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9faW5wdXRfdHlwZV9saW5rXCJcbik7XG5cbi8qY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZS1idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07ICovXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWYWxpZGF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8vRm9yIGJvdGggb2YgdGhlIGZvcm1zLCB3ZSBhcmUgY3JlYXRpbmcgMyBkaWZmZXJlbnQgdmFsaWRhdG9yc1xuLy93ZSBhcmUgY3JlYXRpbmcgMyBpbnN0YW5jZXMgb2YgRm9ybSBWYWxpZGF0b3JzIGkuZS4gb25lIGZvciBlYWNoIHBvcHVwIGZvcm1cbi8vMS1jb25zdCBwcm9maWxlRWRpdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZWRpdC1mb3JtXCJdOyBhbHJlYWR5IGdyYWJiZWQgdGhlIGNvbnN0YW50XG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBwcm9maWxlRWRpdEZvcm0pO1xuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuLy9jb25zdCBhZGRDYXJkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5mb3Jtc1tcImFkZC1jYXJkLWZvcm1cIl07XG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGFkZENhcmRGb3JtRWxlbWVudCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNvbnN0IGF2YXRhckVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGF2YXRhckVkaXRGb3JtKTtcbmF2YXRhckVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLypmdW5jdGlvbiBoYW5kbGVFc2MoZSkge1xuICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfb3BlbmVkXCIpO1xuICAgIC8vY29uc29sZS5sb2cobW9kYWwpO1xuICAgIC8vIGNsb3NlTW9kYWwobW9kYWwpO1xuICB9IFxufSAqL1xuXG4vKmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2MpO1xuICByZXR1cm47XG59ICovXG5cbi8qZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2MpO1xuICByZXR1cm47XG59ICovXG5cbi8qZnVuY3Rpb24gaGFuZGxlT3ZlcmxheShldnQsIG1vZGFsKSB7XG4gIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xuICAgIGNvbnNvbGUubG9nKFwidGVzdGluZyAxMjI1XCIpO1xuICAgIGNvbnNvbGUubG9nKGV2dC50YXJnZXQuY2xhc3NMaXN0KTtcbiAgICBjbG9zZU1vZGFsKG1vZGFsKTtcbiAgfVxufSAqL1xuXG4vLy9TdGVwIDMtIFByZXZpZXcgQ2FyZCBNb2RhbCBDbG9zaW5nIEV2ZW50IExpc3RlbmVyXG4vKnByZXZpZXdDYXJkTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgLy9jb25zb2xlLmxvZyhldnQudGFyZ2V0LmNsYXNzTGlzdCk7XG4gIGhhbmRsZU92ZXJsYXkoZXZ0LCBwcmV2aWV3Q2FyZE1vZGFsKTtcbn0pOyAqL1xuXG4vLy9TdGVwIDMtUHJvZmlsZSBFZGl0IE1vZGFsIENsb3NpbmcgRXZlbnQgTGlzdGVuZXJcbi8qcHJvZmlsZUVkaXRNb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xuICBoYW5kbGVPdmVybGF5KGV2dCwgcHJvZmlsZUVkaXRNb2RhbCk7XG59KTsgKi9cblxuLy8vU3RlcCAzLVByb2ZpbGUgQWRkIE1vZGFsIENsb3NpbmcgRXZlbnQgTGlzdGVuZXJcbi8qYWRkQ2FyZE1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gIGhhbmRsZU92ZXJsYXkoZXZ0LCBhZGRDYXJkTW9kYWwpO1xufSk7ICovXG5cbi8qZnVuY3Rpb24gZmlsbFByb2ZpbGVGb3JtKCkge1xuICAvL2NvbnN0IGluZm8gPSB1aW5mby5nZXRVc2VySW5mbygpO1xuICAvL2NvbnNvbGUubG9nKFwiaW5mbzogXCIgKyBpbmZvKTtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQ7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICByZXR1cm47XG59ICovXG4vL1RoaXMgaXMgd2hlcmUgd2UgaW5zdGFudGlhdGUgdGhlIGNhcmQgY2xhc3Ncbi8vY2FyZERhdGEgaXMge25hbWUsIGxpbmt9LCBpLmUuIGdyYWIgdGhlIHNwZWNpZmljIGRhdGEgYW5kIHBhc3MgaXQgdG8gZ2V0VmlldygpXG4vKmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEsIHdyYXBwZXIpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcbiAgICBjYXJkRGF0YSxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgaGFuZGxlSW1hZ2VDbGlja1xuICApLmdldFZpZXcoKTtcbiAgd3JhcHBlci5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbn0gKi9cblxuLy8gZnVuY3Rpb24gaGFuZGxlQ2FyZERlbGV0ZUNsaWNrKGRhdGEpIHtcbi8vICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcbi8vICAgYXBpLmRlbGV0ZUNhcmQoZGF0YSk7XG4vLyB9XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcbiAgICBjYXJkRGF0YSxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVDb25maXJtYXRpb24sXG4gICAgLy9oYW5kbGVDYXJkRGVsZXRlQ2xpY2tcbiAgICAvL2hhbmRsZUF2YXRhckVkaXRGb3JtLFxuICAgIGhhbmRsZUNhcmRMaWtlXG4gICk7XG4gIHJldHVybiBjYXJkRWxlbWVudC5nZXRWaWV3KCk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEsIHdyYXBwZXIpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcbiAgLy93cmFwcGVyLnByZXBlbmQoY2FyZEVsZW1lbnQpO1xuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbn1cblxuLypcbiBjb25zdCBjb25maXJtZGVsZXRlIGNsaWNrID0gbmV3IFBvcHVwd2l0aGZvcm0oXG4gIHBvcHVwc2VsZWN0b3I6XG4gKVxuKi9cblxuLy8xLWZpbmQgZGVsZXRlIGJ1dHRvblxuLy8yLWFkZCBldmVudCBsaXN0ZW5lciB0byB0aGUgZGVsZXRlIGJ1dHRvblxuLy8zLXRvIHJlbW92ZSBjYXJkLWNhbGwgbWV0aG9kIG9uIGh0bWwgZWxlbWVudCAoY2FyZEVsZW1lbnQucmVtb3ZlKClcbi8vZnVuY3Rpb24gcHJlc3NEZWxldGVCdXR0b24oY2FyZEVsZW1lbnQpIHtcbi8vIGNvbnN0IGRlbGV0ZUNhcmRFbGVtZW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIik7XG4vLyBkZWxldGVDYXJkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAvL2NhcmRFbGVtZW50LnJlbW92ZShcImNhcmRcIik7XG4vLyAgIGNvbnNvbGUubG9nKFwiSXRzIGJlZW4gcmVtb3ZlZCFcIik7XG4vLyAgIHJldHVybjtcbi8vIH0pO1xuLy99XG4vL2Z1bmN0aW9uIHRvZ2dsZUxpa2VCdXR0b24oY2FyZEVsZW1lbnQpIHtcbi8vY29uc3QgbGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4vL2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICBsaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4vLyAgY29uc29sZS5sb2coXCJQcmVzcyBMaWtlIEJ1dHRvblwiKTtcbi8vICByZXR1cm47XG4vL30pO1xuLy99XG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFBvcHVwV2l0aEZvcm0gSW5pdGlhbGl6YXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuY29uc3QgbmV3Q2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2FkZC1jYXJkLW1vZGFsXCIsXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0XG4pO1xubmV3Q2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XG4pO1xuZWRpdFByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vKk9wZW5pbmcgdGhlIFBpY3R1cmUgTW9kYWwgU3RlcHM6XG4gMS1jYWxsIHlvdXIgb3Blbk1vZGFsIGZ1bmN0aW9uLCBwYXNzaW5nIGl0IHRoZSBtb2RhbCBhcyBhbiBhcmd1bWVudFxuIDItc2V0IHRoZSBzcmMgb2YgcG9wdXAgaW1hZ2UgZWxlbWVudFxuIDMtc2V0IHRoZSBhbHQgb2YgcG9wdXAgaW1hZ2UgZWxlbWVudFxuIDQtc2V0IHRoZSB0ZXh0IG9mIHBvcHVwIGNhcHRpb24gZWxlbWVudCovXG4vL3ByZXZpZXdDYXJkSW1hZ2UgaXMgY2hhbmdlZCB0byBoYW5kbGVJbWFnZUNsaWNrXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcmV2aWV3LWNhcmQtbW9kYWxcIik7XG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGNhcmREYXRhKSB7XG4gIHBvcHVwV2l0aEltYWdlLm9wZW4oY2FyZERhdGEpO1xuICAvLyBjb25zb2xlLmxvZyhjYXJkSW1hZ2VFbGVtZW50KTtcbiAgLy8gLy9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIC8vIGNvbnN0IG1vZGFsQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG4gIC8vIG9wZW5Nb2RhbChwcmV2aWV3Q2FyZE1vZGFsKTtcbiAgLy8gbW9kYWxQcmV2aWV3SW1hZ2VFbGVtZW50LnNyYyA9IGNhcmRJbWFnZUVsZW1lbnQuc3JjO1xuICAvLyBtb2RhbFByZXZpZXdJbWFnZUVsZW1lbnQuYWx0ID0gY2FyZEltYWdlRWxlbWVudC5hbHQ7XG4gIC8vIG1vZGFsQ2FwdGlvbi50ZXh0Q29udGVudCA9IGNhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQ7XG4gIC8vIHJldHVybjtcbiAgLy8gLy99KTtcbn1cblxuLypcbkxpbmUgMTogQ2xvbmUgdGhlIHRlbXBsYXRlIGVsZW1lbnQgd2l0aCBhbGwgaXRzIGNvbnRlbnQgYW5kIHN0b3JlIGl0IGluIGEgY2FyZEVsZW1lbnQgdmFyaWFibGVcbkxpbmUgMiAmIDM6IEFjY2VzcyB0aGUgY2FyZCB0aXRsZSBhbmQgaW1hZ2UgYW5kIHN0b3JlIHRoZW0gaW4gdmFyaWFibGVzXG5MaW5lIDQ6IFNldCB0aGUgcGF0aCB0byB0aGUgaW1hZ2UgdG8gdGhlIGxpbmsgZmllbGQgb2YgdGhlIG9iamVjdFxuTGluZSA1OiBTZXQgdGhlIGltYWdlIGFsdCB0ZXh0IHRvIHRoZSBuYW1lIGZpZWxkIG9mIHRoZSBvYmplY3RcbkxpbmUgNjogU2V0IHRoZSBjYXJkIHRpdGxlIHRvIHRoZSBuYW1lIGZpZWxkIG9mIHRoZSBvYmplY3QsIHRvb1xuUmV0dXJuIHRoZSByZWFkeSBIVE1MIGVsZW1lbnQgd2l0aCB0aGUgZmlsbGVkLWluIGRhdGFcbm5vdGU6IGNsb25lTm9kZSgpIG1ldGhvZCBjb3BpZXMgdGhlIGVsZW1lbnQsIGJ1dCBkb2Vzbid0IGFkZCBpdCB0byB0aGUgRE9NXG5pLmUuIHlvdSBoYXZlIHRvIGFwcGVuZCBpdFxuKi9cblxuLy8gZmluZGluZyB0aGUgbGlrZSBidXR0b24gZm9yIHRoZSBjYXJkIHdlIGFyZSBjdXJyZW50bHkgZ2VuZXJhdGluZ1xuLy93aGVuIHdlIHJldHVybiBjYXJkZWxlbWVudCwgaXRzIGFscmVhZHkgc2V0dXAgZm9yIGEgbGlrZS9kZWxldGUvcHJldmlld2NhcmQgYnV0dG9uIHRoYXQgaXMgbGlzdGVuaW5nIGZvciBhIGNsaWNrXG4vL2Z1bmN0aW9uIGdldENhcmRFbGVtZW50KGNhcmREYXRhKSB7XG4vL2NvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbi8vY29uc3QgY2FyZEltYWdlRWxlbWVudCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4vL2NvbnN0IGNhcmRUaXRsZUVsZW1lbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuLy9wcmVzc0RlbGV0ZUJ1dHRvbihjYXJkRWxlbWVudCk7XG4vL3ByZXZpZXdDYXJkSW1hZ2UoY2FyZEltYWdlRWxlbWVudCwgY2FyZFRpdGxlRWxlbWVudCk7XG4vL3RvZ2dsZUxpa2VCdXR0b24oY2FyZEVsZW1lbnQpO1xuLy9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IGNhcmREYXRhLmxpbms7XG4vL2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gY2FyZERhdGEubmFtZTtcbi8vY2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IGNhcmREYXRhLm5hbWU7XG4vL3JldHVybiBjYXJkRWxlbWVudDtcbi8vfVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgSGFuZGxlcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxuICBcIi5wcm9maWxlX190aXRsZVwiLFxuICBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxuICBcIi5wcm9maWxlX19pbWFnZVwiXG4pO1xuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdChpbnB1dFZhbHVlcykge1xuICBlZGl0UHJvZmlsZU1vZGFsLnNldExvYWRpbmcodHJ1ZSk7XG4gIGNvbnNvbGUubG9nKFwiaW5wdXRWYWx1ZXM6XCIsIGlucHV0VmFsdWVzKTtcbiAgYXBpXG4gICAgLnVwZGF0ZVVzZXJJbmZvKGlucHV0VmFsdWVzKVxuICAgIC50aGVuKChpbnB1dFZhbHVlcykgPT4ge1xuICAgICAgLy9jb25zb2xlLmxvZyhcInJlczpcIiwgcmVzKTtcblxuICAgICAgLy8gY29uc29sZS5sb2coXCJyZXMubmFtZTogXCIsIHJlcy5uYW1lKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwicmVzLmFib3V0OiBcIiwgcmVzLmFib3V0KTtcblxuICAgICAgLy8gY29uc29sZS5sb2coXCJyZXMuZGVzY3JpcHRpb246IFwiLCByZXMuZGVzY3JpcHRpb24pO1xuICAgICAgLy8gY29uc29sZS5sb2coODg4ODg4ODg4KTtcbiAgICAgIC8vVXNlckluZm8uc2V0VXNlckluZm8ocmVzLm5hbWUsIHJlcy5kZXNjcmlwdGlvbik7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcy5uYW1lLCBpbnB1dFZhbHVlcy5hYm91dCk7XG4gICAgICBlZGl0UHJvZmlsZU1vZGFsLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgYWxlcnQoYCR7ZXJyfWApO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgZWRpdFByb2ZpbGVNb2RhbC5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn1cblxuLy91c2VySW5mby5zZXRVc2VySW5mbyhwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSwgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUpO1xuLy9jb25zb2xlLmxvZyhcInByb2ZpbGVUaXRsZUlucHV0LnZhbHVlOiBcIiArIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlKTtcbi8vcHJvZmlsZVRpdGxlLnRleHRDb250ZW50ID0gcHJvZmlsZVRpdGxlSW5wdXQudmFsdWU7XG4vL2NvbnNvbGUubG9nKFwicHJvZmlsZVRpdGxlLnRleHRDb250ZW50OlwiICsgcHJvZmlsZVRpdGxlLnRleHRDb250ZW50KTtcbi8vcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWU7XG4vLyBjYWxsIHRoZSAuY2xvc2UoKVxuLy9lZGl0UHJvZmlsZU1vZGFsLmNsb3NlKCk7XG4vL2Nsb3NlTW9kYWwocHJvZmlsZUVkaXRNb2RhbCk7XG5cbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcbiAgY29uc3QgaW5mb09iaiA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIC8vY29uc29sZS5sb2coXCJpbmZvOiBcIiArIGluZm9PYmopO1xuICBjb25zb2xlLmxvZyhcInByb2ZpbGVUaXRsZUlucHV0LnZhbHVlOlwiICsgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUpO1xuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IGluZm9PYmoubmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBpbmZvT2JqLmRlc2NyaXB0aW9uO1xuICBjb25zb2xlLmxvZyhcInByb2ZpbGVUaXRsZUlucHV0LnZhbHVlOiBcIiArIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlKTtcbiAgLy8gY29uc29sZS5sb2coXG4gIC8vICAgXCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZTogXCIgKyBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZVxuICAvLyApO1xuICAvL3Byb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gcHJvZmlsZVRpdGxlLnRleHRDb250ZW50O1xuICAvL3Byb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICByZXR1cm47XG59XG5cbi8vIGZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGUpIHtcbi8vICAgY29uc29sZS5sb2coZSk7XG4vLyAgIGNvbnN0IG5hbWUgPSBjYXJkVGl0bGVJbnB1dC52YWx1ZTtcbi8vICAgY29uc3QgbGluayA9IGNhcmRVUkxJbnB1dC52YWx1ZTtcbi8vICAgcmVuZGVyQ2FyZCh7IG5hbWUsIGxpbmsgfSwgY2FyZHNXcmFwKTtcbi8vICAgLy9jbG9zZU1vZGFsKGFkZENhcmRNb2RhbCk7XG4vLyAgIG5ld0NhcmRNb2RhbC5jbG9zZSgpO1xuLy8gICAvL2FkZEZvcm1WYWxpZGF0b3IucmVzZXRGb3JtKCk7XG4vLyB9XG5cbi8qYXBpIHBzZXVkb2NvZGU6XG4xLWNyZWF0ZSB0aGUgY2FyZFxuMi1hZGQgdGhlIGNhcmQgdG8gdGhlIERPTVxuMy1jbG9zZSB0aGUgcG9wdXAgKi9cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIGNvbnNvbGUubG9nKDMzMzMzMzMsIGlucHV0VmFsdWVzKTtcbiAgLy9lZGl0UHJvZmlsZU1vZGFsLnNldExvYWRpbmcodHJ1ZSk7XG4gIG5ld0NhcmRNb2RhbC5zZXRMb2FkaW5nKHRydWUpO1xuICBhcGlcbiAgICAuYWRkQ2FyZChpbnB1dFZhbHVlcylcbiAgICAudGhlbigoY2FyZERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XG4gICAgICAvL2NvbnNvbGUubG9nKGNhcmQpO1xuICAgICAgbmV3Q2FyZE1vZGFsLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgYWxlcnQoYCR7ZXJyfWApO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgbmV3Q2FyZE1vZGFsLnNldExvYWRpbmcoZmFsc2UpO1xuICAgIH0pO1xufVxuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgTGlzdGVuZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vcHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vIGZpbGxQcm9maWxlRm9ybSgpO1xuLy8gb3Blbk1vZGFsKCk7XG4vL30pO1xuXG4vL3Byb2ZpbGVFZGl0TW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VNb2RhbCk7XG4vLyBwcm9maWxlRWRpdE1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4vLyAgY2xvc2VNb2RhbChwcm9maWxlRWRpdE1vZGFsKVxuLy8pO1xuXG4vLyBGb3JtIExpc3RlbmVyc1xuLy9wcm9maWxlRWRpdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdCk7XG4vL2FkZENhcmRGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KTtcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgLy9wcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudDtcbiAgLy9wcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgZmlsbFByb2ZpbGVGb3JtKCk7XG4gIC8vIFVzZSAub3BlbigpIG1ldGhvZFxuICBlZGl0UHJvZmlsZU1vZGFsLm9wZW4oKTtcbiAgLy9vcGVuTW9kYWwocHJvZmlsZUVkaXRNb2RhbCk7XG59KTtcblxuLy9hZGQgbmV3IGNhcmQgYnV0dG9uXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIC8vIHJlc2V0IHRoZSB2YWxpZGF0aW9uXG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRGb3JtKCk7XG4gIC8vIG9wZW4gdGhlIHBvcHVwXG4gIG5ld0NhcmRNb2RhbC5vcGVuKCk7XG59KTtcblxuYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gIC8vY2xvc2VNb2RhbChhZGRDYXJkTW9kYWwpXG4gIG5ld0NhcmRNb2RhbC5jbG9zZSgpXG4pO1xuXG5wcmV2aWV3Q2FyZE1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gIC8vY2xvc2VNb2RhbChwcmV2aWV3Q2FyZE1vZGFsKVxuICBwb3B1cFdpdGhJbWFnZS5jbG9zZSgpXG4pO1xuXG4vKmZvciAobGV0IGkgPSAwOyBpIDwgaW5pdGlhbENhcmRzLmxlbmd0aDsgaSsrKSB7XG4gIGNvbnN0IGNhcmQgPSBpbml0aWFsQ2FyZHNbaV07XG59IGFsdGVybmF0aXZlIGl0ZXJhdGl2ZSBzdGF0ZW1lbnQgdGhhdCBjb3VsZCd2ZSBoYXZlIGJlZW4gdXNlZCovXG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBDYXJkIEluaXRpYWxpemF0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vL2NvbW1lbnQgb3V0IGxpbmUgMzYzIGIvYyB0aGUgU2VjdGlvbiBjbGFzcyB3aWxsIG5vdyBkbyBpdFxuLy9pbnN0YW50aWF0aW5nIGl0IG9ubHkgcnVucyB0aGUgY29uc3RydWN0b3Jcbi8vaW5zaWRlIHJlbmRlcmVyLWNyZWF0ZSB0aGUgY2FyZCBhbmQgdGhlbiBjYWxsIHNlY3Rpb24uYWRkIGl0ZW0gYW5kIHBhc3MgaW4gbmV3IGNhcmRcblxuLy8gY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbi8vICAge1xuLy8gICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4vLyAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuLy8gICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGNhcmREYXRhKSk7XG4vLyAgICAgfSxcbi8vICAgfSxcbi8vICAgXCIuY2FyZHNfX2xpc3RcIlxuLy8gKTtcbi8vIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbi8vZGVjbGFyZSB0aGUgdmFyaWFibGUgY2FyZFNlY3Rpb24sIGJ1dCBpdHMgdmFsdWUgaXMgdW5kZWZpbmVkXG4vL3dlIGRlZmluZSBpdCBtb21lbnRzIGxhdGVyLi4uXG5sZXQgY2FyZFNlY3Rpb247XG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChjYXJkcykgPT4ge1xuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcbiAgICAgICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkRGF0YSkpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIFwiLmNhcmRzX19saXN0XCJcbiAgICApO1xuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIGFsZXJ0KGAke2Vycn1gKTtcbiAgfSk7XG5cbmNvbnN0IGRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcbiAgXCIjZGVsZXRlLWNvbmZpcm1hdGlvbi1tb2RhbFwiXG4pO1xuZGVsZXRlQ29uZmlybWF0aW9uTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8xLW9wZW4gdGhlIGRlbGV0ZSBjb25maXJtYXRpb24gbW9kYWxcbi8vMi1jYWxsIHRoZSBtb2RhbCdzICBzZXRTdWJtaXRBY3Rpb24gKGl0cyBhIHB1YmxpYyBtZXRob2QpXG4vLzMtY2FsbCB0aGUgQVBJIHRvIGRlbGV0ZSB0aGUgY2FyZCBmcm9tIHRoZSBzZXJ2ZXJcbi8vNC1pZiB0aGUgQVBJIGlzIHN1Y2Nlc3NmdWxsLCBpdCB3aWxsIGRlbGV0ZSBmcm9tIHNlcnZlciwgbWFrZSBzdXJlIHRvIGRlbGV0ZSBsb2NhbGx5IGFsc29cbi8vNS1jbG9zZSB0aGUgbW9kYWxcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNvbmZpcm1hdGlvbihjYXJkKSB7XG4gIGRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsLnNldExvYWRpbmcodHJ1ZSk7XG4gIGRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsLm9wZW4oKTtcblxuICBkZWxldGVDb25maXJtYXRpb25Nb2RhbC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xuICAgIGFwaVxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZC5faWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQuaGFuZGxlRGVsZXRlQ2FyZCgpO1xuXG4gICAgICAgIGRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsLmNsb3NlKCk7XG4gICAgICAgIC8vZGVsZXRlQ29uZmlybWF0aW9uTW9kYWwuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICBhbGVydChgJHtlcnJ9YCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBkZWxldGVDb25maXJtYXRpb25Nb2RhbC5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0pO1xuICB9KTtcbn1cblxuLy9FZGl0IFByb2ZpbGUgQXZhdGFyLVBzZXVkb2NvZGU6XG4vLzEtR3JhYiB0aGUgZWRpdEljb24gYnV0dG9uIGNsYXNzICYgdGhlbiBhZGQgYW4gZXZlbnQgbGlzdGVuZXIgdG8gaXRcbi8vMi1BZGQgZXZlbnQgbGlzdG5lciB3aXRoICBcImNsaWNrXCIsIHRoZSBlZGl0IHBvcHVwIGF2YXRhciBmb3JtIHNob3VsZCBvcGVuXG4vLzMtSW5zdGFudGlhdGUgdGhldyBlZGl0QXZhdGFyUG9wdXAgZm9ybSB1c2luZyB0aGUgY2xhc3MgUG9wdXBXaXRoRm9ybVxuXG5jb25zdCBlZGl0QXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0aWNvblwiKTtcbmVkaXRBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc29sZS5sb2coXCJ5b3UgY2xpY2tlZCBvbiBlZGl0QXZhdGFyQnV0dG9uXCIpO1xuICBlZGl0QXZhdGFyUG9wdXAub3BlbigpO1xufSk7XG5cbmNvbnN0IGVkaXRBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNlZGl0LWF2YXRhci1tb2RhbFwiLFxuICBoYW5kbGVBdmF0YXJFZGl0Rm9ybVxuKTtcbmVkaXRBdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJFZGl0Rm9ybShpbnB1dFZhbHVlcykge1xuICAvLy9cbiAgLy9jb25zb2xlLmxvZyhcImhpXCIpO1xuICBlZGl0QXZhdGFyUG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcbiAgLy9jb25zb2xlLmxvZyhcIl9nZXRJbnB1dFZhbHVlczogXCIsIF9nZXRJbnB1dFZhbHVlcy51cmwpO1xuICBhcGlcbiAgICAuc2V0VXNlckF2YXRhcihpbnB1dFZhbHVlcy51cmwpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJyZXM6XCIsIHJlcyk7XG4gICAgICBjb25zb2xlLmxvZyhcIl9nZXRJbnB1dFZhbHVlcy51cmw6XCIsIGlucHV0VmFsdWVzLnVybCk7XG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKGlucHV0VmFsdWVzLnVybCk7XG5cbiAgICAgIGVkaXRBdmF0YXJQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIGFsZXJ0KGAke2Vycn1gKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGVkaXRBdmF0YXJQb3B1cC5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn1cbi8vRWRpdCBQcm9maWxlIEF2YXRhci1Qc2V1ZG9jb2RlOi8vLy8vLy8vLy8vLy8vLy8vXG5cbi8vSGFuZGxlIENhcmQgTGlrZSBQc2V1ZG9jb2RlLS0tXG4vLyBpZiBjYXJkIGlzIHdoaXRlIChub3QgbGlrZWQpIHRoZW5cbi8vICB0aGUgYXBpLnVwZGF0ZUxpa2UgaXMgY2FsbGVkXG4vL2Vsc2UgdGhlIGhlYXJ0IGlzIGJsYWNrLyhpa2VkIGFscmVhZHkpXG4vL3RoZW4gYWRkIHRoZSBhcGkgdG8gcmVtb3ZlIHRoZSBsaWtlXG4vLz8/IGRvIEkgcGFzcyBjYXJkIGFzIHBhcmFtZXRlcj8gb3IgYnlwYXNzIGl0IGFuZCB1c2UgJ3RoaXMnXG4vL3NpbmNlIHRoZXkgbG9vayB0aGUgc2FtZT8gaS5lIG91dHB1dCBpcyB0aGUgc2FtZVxuZnVuY3Rpb24gaGFuZGxlQ2FyZExpa2UoY2FyZCkge1xuICBjb25zb2xlLmxvZyhcInRlc3RpbmcgTGlrZSAxMjMhXCIpO1xuICBjb25zb2xlLmxvZyhcInRoaXM6XCIsIHRoaXMpO1xuICBjb25zb2xlLmxvZyhcImNhcmQgaXMgbGlrZWQ6XCIsIGNhcmQuX2lzTGlrZWQpO1xuICBjb25zb2xlLmxvZyhcImNhcmQgaXMgdW5saWtlZDpcIiwgIWNhcmQuX2lzTGlrZWQpO1xuICBjb25zb2xlLmxvZyhcInRoaXMuX25hbWU6XCIsIHRoaXMuX25hbWUsIFwidGhpcy5faXNMaWtlZDpcIiwgdGhpcy5faXNMaWtlZCk7XG4gIGlmICghY2FyZC5faXNMaWtlZCkge1xuICAgIGFwaVxuICAgICAgLnNldExpa2VkKGNhcmQuX2lkKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlczpcIiwgcmVzKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXMuaXNMaWtlZDpcIiwgcmVzLmlzTGlrZWQpO1xuICAgICAgICBjYXJkLnNldElzTGlrZWQocmVzLmlzTGlrZWQpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgYWxlcnQoYCR7ZXJyfWApO1xuICAgICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgYXBpXG4gICAgICAucmVtb3ZlTGlrZShjYXJkLl9pZClcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXNcIiwgcmVzKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXMuaXNMaWtlZDpcIiwgcmVzLmlzTGlrZWQpO1xuICAgICAgICBjYXJkLnNldElzTGlrZWQocmVzLmlzTGlrZWQpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgYWxlcnQoYCR7ZXJyfWApO1xuICAgICAgfSk7XG4gIH1cbn1cblxuLy9JdGVyYXRlIHRocm91Z2ggdGhlIGNhcmQgZGF0YSB0aGF0IHdlIGluaXRpYWxseSBoYXZlIGFuZFxuLy9ydW4gdGhlIGZ1bmN0aW9uIGdldENhcmRFbGVtZW50IG9uIGVhY2ggaW5kZXhcbi8vaW5pdGlhbENhcmRzLmZvckVhY2goKGNhcmREYXRhKSA9PiByZW5kZXJDYXJkKGNhcmREYXRhLCBjYXJkc1dyYXApKTtcblxuLypjb25zdCBsaWtlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG5saWtlQnV0dG9ucy5mb3JFYWNoKChsaWtlQnV0dG9uKSA9PiB7XG4gIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH0pO1xufSk7ICovXG5cbmNvbnNvbGUubG9nKFwidGVzdGluZzk4XCIpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQVBJIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIC8vVGhpcyB3aWxsIGhhbmRsZSBmZXRjaCByZXF1ZXN0c1xuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9XG4gIH1cblxuICAvL0dFVCAvdXNlcnMvbWUg4oCTIEdldCB0aGUgY3VycmVudCB1c2Vy4oCZcyBpbmZvXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICAvL0dFVCAvY2FyZHMg4oCTIEdldCBhbGwgY2FyZHNcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICAvL1BBVENIIC91c2Vycy9tZSDigJMgVXBkYXRlIHlvdXIgcHJvZmlsZSBpbmZvcm1hdGlvblxuICB1cGRhdGVVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICAvLzUtUE9TVCAvY2FyZHMg4oCTIENyZWF0ZSBhIGNhcmRcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBsaW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICAvL2luIHByb2dyZXNzKioqKlxuICAvLzYtREVMRVRFIC9jYXJkcy86Y2FyZElkIOKAkyBEZWxldGUgYSBjYXJkXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICAvL1BBVENIIC91c2Vycy9tZS9hdmF0YXIg4oCTIFVwZGF0ZSBhdmF0YXJcbiAgLy9hdmF0YXJEYXRhLXByb3BlcnR5IHNob3VsZCBjb250YWluIGEgbGluayB0byB0aGUgbmV3IHByb2ZpbGUgcGljdHVyZVxuICBzZXRVc2VyQXZhdGFyKHVybCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhcjogdXJsIH0pLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy83LVBVVCAvY2FyZHMvOmNhcmRJZC9saWtlcyDigJMgTGlrZSBhIGNhcmRcbiAgc2V0TGlrZWQoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy84LURFTEVURSAvY2FyZHMvOmNhcmRJZC9saWtlcyDigJMgRGlzbGlrZSBhIGNhcmRcbiAgcmVtb3ZlTGlrZShpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICAvLyBvdGhlciBtZXRob2RzIGZvciB3b3JraW5nIHdpdGggdGhlIEFQSVxuICAvLzEqLUdFVCAvdXNlcnMvbWUg4oCTIEdldCB0aGUgY3VycmVudCB1c2Vy4oCZcyBpbmZvXG4gIC8vMiotUEFUQ0ggL3VzZXJzL21lIOKAkyBVcGRhdGUgeW91ciBwcm9maWxlIGluZm9ybWF0aW9uXG4gIC8vMyotUEFUQ0ggL3VzZXJzL21lL2F2YXRhciDigJMgVXBkYXRlIGF2YXRhclxuICAvLzQqLUdFVCAvY2FyZHMg4oCTIEdldCBhbGwgY2FyZHNcbiAgLy81Ki1QT1NUIC9jYXJkcyDigJMgQ3JlYXRlIGEgY2FyZFxuICAvLzYqLURFTEVURSAvY2FyZHMvOmNhcmRJZCDigJMgRGVsZXRlIGEgY2FyZFxuICAvLzcqLVBVVCAvY2FyZHMvOmNhcmRJZC9saWtlcyDigJMgTGlrZSBhIGNhcmRcbiAgLy84Ki1ERUxFVEUgL2NhcmRzLzpjYXJkSWQvbGlrZXMg4oCTIERpc2xpa2UgYSBjYXJkXG5cbiAgLy8gd2hlbiB3ZSBjYWxsIGEganMgZmlsZSwgdGhpcyBzaG91bGQgYmUgY2FtZUNhc2VcbiAgLy8gQlVUXG4gIC8vIHdoZW4geW91IG5hbWUgYSBSZWFjdCBjb21wb25lbnQgaXMgc2hvdWxkYmUgUGFzY2FsQ2FzZVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIGNvbnNvbGUubG9nKFwiUG9wdXBTZWxlY3RvciBpczogXCIsIHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCJcbiAgICApO1xuICAgIC8vdGhpcy5fY2FyZFRpdGxlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX21vZGFsQ2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuICB9XG5cbiAgb3BlbihkYXRhKSB7XG4gICAgY29uc29sZS5sb2coXCJtb2RhbCBDYXB0aW9uXCIpO1xuICAgIC8vY29uc29sZS5sb2codGhpcy5fY2FyZEltYWdlRWxlbWVudCk7XG4gICAgLy9jb25zb2xlLmxvZyh0aGlzLl9tb2RhbENhcHRpb24udGV4dENvbnRlbnQpO1xuICAgIC8vY29uc29sZS5sb2codGhpcy5fbW9kYWxDYXB0aW9uLnRleHRDb250ZW50KTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IGRhdGEubmFtZTsgLy9gSW1hZ2UgJHtkYXRhLmxpbmt9YDtcbiAgICB0aGlzLl9tb2RhbENhcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgY29uc29sZS5sb2codGhpcy5fbW9kYWxDYXB0aW9uLnRleHRDb250ZW50KTtcbiAgICBjb25zb2xlLmxvZyhcInRoZSBhbHQgdGV4dCBpczpcIiwgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQpO1xuXG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbi8qXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnI3ByZXZpZXctY2FyZC1tb2RhbCcpXG5wb3B1cFdpdGhJbWdhZ2Uuc2V0RXZlbnRMaXN0bmVycygpXG5cbmNvbnN0IHBvcHVwV2l0aEZvcm0xPSBuZXcgUG9wdXBXaXRoRm9ybSgnI2FkZC1jYXJkLW1vZGFsJylcblxuY29uc3QgcG9wdXBXaXRoRm9ybTE9IG5ldyBQb3B1cFdpdGhGb3JtKCcjcHJvZmlsZS1lZGl0LW1vZGFsJylcbiovXG4iLCIvL1VzZXJJbmZvIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciByZW5kZXJpbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIgb24gdGhlIHBhZ2VcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3JcbiAgICApO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIHJldHVybiBvYmplY3QgY29udGFpbmluZyB0aGUgdGV4dCBjb250ZW50IG9mIHRoZSBwcm9maWxlIGVsZW1lbnRzXG4gICAqIG1ldGhvZCBpcyBoYW5keSB3aGVuIGl0cyBuZWNlc3NhcnkgdG8gZGlzcGxheSB0aGUgdXNlciBkYXRhIGluIHRoZSBvcGVuIGZvcm1cbiAgICovXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgLy90YWtlcyBuZXcgdXNlciBkYXRhICYgYWRkcyBpdCB0byB0aGUgcGFnZVxuICAvL21ldGhvZCBpcyB1c2VkIGFmdGVyIHN1Y2Nlc3NmdWwgc3VibWlzc2lvbiBvZiB0aGUgcHJvZmlsZSBmb3JtXG4gIHNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gIH1cblxuICAvL3NldCB0aGUgbmV3IGF2YXRhciBhcyB0aGUgcHJvZmlsZSBpbWFnZVxuICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XG4gIH1cbn1cblxuLy9cbi8vY29uc3QgdXNlcmluZm8gID0gbmV3IHVzZXJpbmZvKCcucHJmb2llX190aXRsZSwgJy5wcm9maWxlLS1kZXNjaXJwdClcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIpO1xuICB9XG5cbiAgLy90aGlzIHdpbGwgYmUgY2FsbGVkIGZyb20gaW5kZXguanMgKHB1YmxpYyBtZXRob2QpXG4gIHNldFN1Ym1pdEFjdGlvbihoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgLy8gc2V0IHRoZSBzdWJtaXQgaGFuZGxlclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICAgIC8vdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0TG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlllc1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0aW5nLi4uXCI7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVDYXJkRGVsZXRlQ2xpY2siLCJoYW5kbGVDYXJkTGlrZSIsIm5hbWUiLCJsaW5rIiwiX2lkIiwiaXNMaWtlZCIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2lzTGlrZWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlQ2FyZERlbGV0ZUNsaWNrIiwiX2hhbmRsZUNhcmRMaWtlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb25zb2xlIiwibG9nIiwiX2NhcmRJbWFnZSIsImNoYW5nZUxpa2VCdXR0b25TdGF0ZSIsIl9saWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwic2V0SXNMaWtlZCIsImhhbmRsZURlbGV0ZUNhcmQiLCJfZ2V0RWxlbWVudCIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJfY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxlbWVudHMiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJfZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZUJ1dHRvbiIsInJlc2V0Rm9ybSIsInJlc2V0IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtRGF0YU9iaiIsIl9pbnB1dFZhbHVlcyIsInZhbHVlIiwic2V0TG9hZGluZyIsImlzTG9hZGluZyIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiZm9ybVNlbGVjdG9yIiwiYXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2hhbmRsZVJlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiZ2V0SW5pdGlhbENhcmRzIiwidXBkYXRlVXNlckluZm8iLCJfcmVmMiIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRDYXJkIiwiX3JlZjMiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwic2V0VXNlckF2YXRhciIsInVybCIsImF2YXRhciIsInNldExpa2VkIiwicmVtb3ZlTGlrZSIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImFsZXJ0IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJhZGRDYXJkTW9kYWwiLCJwcmV2aWV3Q2FyZE1vZGFsIiwiYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24iLCJwcmV2aWV3Q2FyZE1vZGFsQ2xvc2VCdXR0b24iLCJhZGROZXdDYXJkQnV0dG9uIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVFZGl0Rm9ybSIsImZvcm1zIiwiYWRkQ2FyZEZvcm1FbGVtZW50IiwiYXZhdGFyRWRpdEZvcm0iLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImNyZWF0ZUNhcmQiLCJjYXJkRGF0YSIsImhhbmRsZURlbGV0ZUNvbmZpcm1hdGlvbiIsIm5ld0NhcmRNb2RhbCIsImlucHV0VmFsdWVzIiwiY2FyZCIsImNhcmRTZWN0aW9uIiwiZmluYWxseSIsImVkaXRQcm9maWxlTW9kYWwiLCJwb3B1cFdpdGhJbWFnZSIsIl9jYXJkSW1hZ2VFbGVtZW50IiwiX21vZGFsQ2FwdGlvbiIsImRhdGEiLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9wcm9maWxlTmFtZUVsZW1lbnQiLCJfcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudCIsIl9hdmF0YXIiLCJkZXNjcmlwdGlvbiIsImluZm9PYmoiLCJmaWxsUHJvZmlsZUZvcm0iLCJjYXJkcyIsImRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsIiwic2V0U3VibWl0QWN0aW9uIiwiZWRpdEF2YXRhclBvcHVwIl0sInNvdXJjZVJvb3QiOiIifQ==