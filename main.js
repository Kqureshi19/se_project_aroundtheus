!function(){"use strict";class e{constructor(e,t,s,o,r){let{name:n,link:i,_id:l,isLiked:a}=e;this._name=n,this._link=i,this._id=l,this._isLiked=a,this._cardSelector=t,this._handleImageClick=s,this._handleCardDeleteClick=o,this._handleCardLike=r}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{console.log(this._handleCardLike),this._handleCardLike(this)})),this._cardElement.querySelector(".card__trash-button").addEventListener("click",(()=>{this._handleCardDeleteClick(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}changeLikeButtonState(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}setIsLiked(e){this._isLiked=e,this.changeLikeButtonState()}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}_getElement(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getElement(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this.changeLikeButtonState(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._cardElement}}var t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._submitButton=t.querySelector(e.submitButtonSelector),console.log("formElement is: ",this._form)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}resetForm(){this._form.reset(),this._disableButton()}_toggleButtonState(){this._hasInvalidInput(this._inputElements)?this._disableButton():this._enableButton()}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_setEventListeners(){this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class s{constructor(e){let{popupSelector:t}=e;console.log(t),this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}class o extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._submitButton=this._popupForm.querySelector(".modal__save-button")}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e={};return this._inputValues=this._popupForm.querySelectorAll(".modal__input"),this._inputValues.forEach((t=>{e[t.name]=t.value})),e}setLoading(e){this._submitButton.textContent=e?"Saving...":"Save"}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}class r{constructor(e,t){let{items:s,renderer:o}=e;this._items=s,this._renderer=o,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}const n={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},i=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._handleResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._handleResponse)}updateUserInfo(e){let{name:t,about:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._handleResponse)}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._handleResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleResponse)}setUserAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._handleResponse)}setLiked(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._handleResponse)}removeLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._handleResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"7d078757-23ed-414e-a9d7-d63a6269c72c","Content-Type":"application/json"}});i.getUserInfo().then((e=>{console.log("res:",e),console.log("res.name: ",e.name),console.log("res.about: ",e.about),C.setUserAvatar(e.avatar),C.setUserInfo(e.name,e.about)})).catch((e=>{console.error(e),alert(`${e}`)})),document.querySelector("#card-template").content.firstElementChild;const l=document.querySelector("#profile-edit-button"),a=document.querySelector("#profile-edit-modal"),c=document.querySelector("#add-card-modal"),d=document.querySelector("#preview-card-modal"),h=(document.querySelector(".modal__preview-image"),a.querySelector("#profile-edit-modal-close-button"),c.querySelector("#add-card-modal-close-button")),u=d.querySelector("#preview-card-modal-close-button"),_=document.querySelector(".profile__add-button"),m=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),p=document.querySelector("#profile-description-input"),v=document.forms["profile-edit-form"],E=document.forms["add-card-form"],f=document.forms["avatar-edit-form"];console.log(f),document.querySelector(".cards__list"),E.querySelector(".modal__input_type_title"),E.querySelector(".modal__input_type_link"),new t(n,v).enableValidation();const g=new t(n,E);function L(t){return new e(t,"#card-template",y,B,w).getView()}g.enableValidation(),new t(n,f).enableValidation();const S=new o("#add-card-modal",(function(e){console.log(3333333,e),S.setLoading(!0),i.addCard(e).then((e=>{const t=L(e);I.addItem(t),S.close()})).catch((e=>{console.error(e),alert(`${e}`)})).finally((()=>{S.setLoading(!1)}))}));S.setEventListeners();const k=new o("#profile-edit-modal",(function(e){k.setLoading(!0),console.log("inputValues:",e),i.updateUserInfo(e).then((e=>{C.setUserInfo(e.name,e.about),k.close()})).catch((e=>{console.error(e),alert(`${e}`)})).finally((()=>{k.setLoading(!1)}))}));k.setEventListeners();const b=new class extends s{constructor(e){super({popupSelector:e}),console.log("PopupSelector is: ",e),this._cardImageElement=this._popupElement.querySelector(".modal__preview-image"),this._modalCaption=this._popupElement.querySelector(".modal__caption")}open(e){console.log("modal Caption"),this._cardImageElement.src=e.link,this._cardImageElement.alt=e.name,this._modalCaption.textContent=e.name,console.log(this._modalCaption.textContent),console.log("the alt text is:",this._cardImageElement.alt),super.open()}}("#preview-card-modal");function y(e){b.open(e)}b.setEventListeners();const C=new class{constructor(e,t,s){this._profileNameElement=document.querySelector(e),this._profileDescriptionElement=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{name:this._profileNameElement.textContent,description:this._profileDescriptionElement.textContent}}setUserInfo(e,t){this._profileNameElement.textContent=e,this._profileDescriptionElement.textContent=t}setUserAvatar(e){this._avatar.src=e}}(".profile__title",".profile__description",".profile__image");let I;l.addEventListener("click",(()=>{!function(){const e=C.getUserInfo();console.log("profileTitleInput.value:"+m.value),m.value=e.name,p.value=e.description,console.log("profileTitleInput.value: "+m.value)}(),k.open()})),_.addEventListener("click",(()=>{g.resetForm(),S.open()})),h.addEventListener("click",(()=>S.close())),u.addEventListener("click",(()=>b.close())),i.getInitialCards().then((e=>{I=new r({items:e,renderer:e=>{I.addItem(L(e))}},".cards__list"),I.renderItems()})).catch((e=>{console.error(e),alert(`${e}`)}));const q=new class extends s{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupForm.querySelector(".modal__save-button")}setSubmitAction(e){this._handleFormSubmit=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}setLoading(e){this._submitButton.textContent=e?"Deleting...":"Yes"}}("#delete-confirmation-modal");function B(e){q.open(),q.setSubmitAction((()=>{q.setLoading(!0),i.deleteCard(e._id).then((()=>{e.handleDeleteCard(),q.close()})).catch((e=>{console.error(e),alert(`${e}`)})).finally((()=>{q.setLoading(!1)}))}))}q.setEventListeners(),document.querySelector(".editicon").addEventListener("click",(()=>{console.log("you clicked on editAvatarButton"),U.open()}));const U=new o("#edit-avatar-modal",(function(e){U.setLoading(!0),i.setUserAvatar(e.url).then((t=>{console.log("res:",t),console.log("_getInputValues.url:",e.url),C.setUserAvatar(e.url),U.close()})).catch((e=>{console.error(e),alert(`${e}`)})).finally((()=>{U.setLoading(!1)}))}));function w(e){console.log("testing Like 123!"),console.log("this:",this),console.log("card is liked:",e._isLiked),console.log("card is unliked:",!e._isLiked),console.log("this._name:",this._name,"this._isLiked:",this._isLiked),e._isLiked?i.removeLike(e._id).then((t=>{console.log("res",t),console.log("res.isLiked:",t.isLiked),e.setIsLiked(t.isLiked)})).catch((e=>{console.error(e),alert(`${e}`)})):i.setLiked(e._id).then((t=>{console.log("res:",t),console.log("res.isLiked:",t.isLiked),e.setIsLiked(t.isLiked)})).catch((e=>{console.error(e),alert(`${e}`)}))}U.setEventListeners(),console.log("testing98")}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0sSUFyQm5CcEMsRUFDRzhCLFNBQVM4QixFQUFLdkssS0FDZDBILE1BQU1ULElBQ0xuRyxRQUFRQyxJQUFJLE9BQVFrRyxHQUNwQm5HLFFBQVFDLElBQUksZUFBZ0JrRyxFQUFJaEgsU0FDaENzSyxFQUFLakosV0FBVzJGLEVBQUloSCxRQUFRLElBRTdCNkksT0FBT0MsSUFDTmpJLFFBQVFrSSxNQUFNRCxHQUNkRSxNQUFPLEdBQUVGLElBQU0sR0FldkIsQ0FoRUE0QyxFQUFnQjNHLG9CQTZFaEJsRSxRQUFRQyxJQUFJLFkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FQSS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9DbGFzcyBDYXJkIHdpbGwgaGF2ZSAzIHBhcmFtZXRlcnMsIDEuIGRhdGEgMi4gY2FyZFNlbGVjdG9yIDMuIGhhbmRsZUltYWdlQ2xpY2tcbi8vZ2V0dmlldygpIGlzIHRoZSBlbnRyeSBwb2ludCwgaXQgaXMgdGhlIG9ubHkgcHVibGljIG1ldGhvZCBpbiB0aGlzIGNsYXNzXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgfSxcbiAgICBjYXJkU2VsZWN0b3IsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVDYXJkRGVsZXRlQ2xpY2ssXG4gICAgaGFuZGxlQ2FyZExpa2VcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5faWQgPSBfaWQ7XG4gICAgdGhpcy5faXNMaWtlZCA9IGlzTGlrZWQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yOyAvL3RoaXMgaXMgdGhlIHRlbXBsYXRlIG9mIHRoZSBjYXJkLCBpLmUgY2FyZFNlbGVjdG9yID0gI2NhcmQtdGVtcGxhdGVcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlQ2xpY2sgPSBoYW5kbGVDYXJkRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlQ2FyZExpa2UgPSBoYW5kbGVDYXJkTGlrZTtcblxuICAgIC8vIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0RWxlbWVudCgpO1xuICAgIC8vIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgLy8gdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICAvLyB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICAvL3RoaXMuY2hhbmdlTGlrZUJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICAvLyBzZXRMaWtlQnV0dG9uU3RhdGUoKSB7XG4gIC8vICAgaWYgKChpc0xpa2VkID0gdHJ1ZSkpIHtcbiAgLy8gICAgIHRoaXMuY2hhbmdlTGlrZUJ1dHRvblN0YXRlKCk7XG4gIC8vICAgfVxuICAvLyB9XG5cbiAgLy9TZXQgdGhlIEV2ZW50IExpc3RlbmVycyBmb3IgdGhlIGZvbGxvd2luZyAoMyk6XG4gIC8vMS4gTGlrZSBCdXR0b25cbiAgLy8yLiBEZWxldGUgQnV0dG9uXG4gIC8vMy4gUHJldmlldyBJbWFnZVxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy9cIi5jYXJkX19saWtlLWJ1dHRvblwiIHRoaXMuX2NoYW5nZUxpa2VCdXR0b25TdGF0ZSgpXG4gICAgLy8xLUhhbmRsZSB0aGUgTGlrZSBCdXR0b25cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9oYW5kbGVDYXJkTGlrZSk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlKHRoaXMpO1xuICAgICAgICAvL3RoaXMuY2hhbmdlTGlrZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcblxuICAgIC8vMi1IYW5kbGUgdGhlIERlbGV0ZSBCdXR0b25cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2gtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgLy8gdGhpcyBpcyBkb25lIGxvY2FsbHksIHN1YnNlcXVlbnQgbGluZSBpcyBkZWxldGVkIG9uIHNlcnZlci0tdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgICAvL2RlYnVnZ2VyO1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlQ2xpY2sodGhpcyk7XG4gICAgICB9KTtcbiAgICAvLyB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICAvLyB0aGlzLl9jYXJkVGl0bGVFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICAvLzMtSGFuZGxlIHRoZSBDbGljayBJbWFnZSBCdXR0b24gaS5lLiBQcmV2aWV3IENhcmQgQ2xpY2tcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xuICAgIH0pO1xuICB9XG4gIC8vIGNoYW5nZSBzZXRMaWtlSWNvbiB0byBjaGFuZ2VMaWtlQnV0dG9uU3RhdGVcbiAgY2hhbmdlTGlrZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9XG4gIH1cblxuICAvL2Z5aSwgY2FyZGVsZW1lbnQgaXMgdGhlIGN1cnJlbnQgY2FyZCB3ZSBhcmUgd29ya2luZyB3aXRoXG4gIHNldElzTGlrZWQoaXNMaWtlZCkge1xuICAgIC8vIC8vY29uc29sZS5sb2coXCJQcmVzc2luZyBMaWtlIEJ1dHRvbiBmcm9tICBjYXJkIGNsYXNzXCIpO1xuICAgIC8vIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgLy8gICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgIC8vICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgLy8gLy90aGlzLl9jYXJkRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIHRoaXMuX2lzTGlrZWQgPSBpc0xpa2VkO1xuICAgIC8vdGhpcy5faXNMaWtlZCA9ICF0aGlzLl9pc0xpa2VkO1xuICAgIHRoaXMuY2hhbmdlTGlrZUJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICBoYW5kbGVEZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9nZXRFbGVtZW50KCkge1xuICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgLy9QdWJsaWMgTWV0aG9kLXNpbmNlIHlvdSBjYW4gYWNjZXNzIGl0IG91dHNpZGUgaXRzIGNsYXNzXG4gIC8vdGhpcyBpcyB0aGUgZW50cmFuY2UgcG9pbnQgdG8geW91ciBjYXJkLCB3aGljaCB3aWxsIGJlIHVzZWQvY2FsbGVkIGluIGluZGV4LmpzXG4gIC8vMS5HcmFiIHRoZSB0ZW1wbGF0ZSBmaXJzdCBhbmQgY2xvbmUgaXQgKGkuZSBjYXJkU2VsZWN0b3IgPSAjY2FyZC10ZW1wbGF0ZSlcbiAgLy8yLiBBZGQgZGF0YSB0byB0aGUgdGVtcGxhdGUgY2xvbmUgJiBjYWxsIHNldEV2ZW50TGlzdGVyc24oKSBtZXRob2QgYW5kIHJldHVybiBuZXcgY2FyZFxuICBnZXRWaWV3KCkge1xuICAgIC8vdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yOyAvL3RoaXMgaXMgdGhlIHRlbXBsYXRlIG9mIHRoZSBjYXJkLCBpLmUgY2FyZFNlbGVjdG9yID0gI2NhcmQtdGVtcGxhdGVcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0RWxlbWVudCgpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLmNoYW5nZUxpa2VCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgLy9jb25zb2xlLmxvZyhcInJpZ2h0IGhlcmVcIik7XG4gICAgLy9jb25zb2xlLmxvZyhcImNhcmRTZWxlY3RvcjogXCIsIHRoaXMuX2NhcmRTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICAvL3RoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0RWxlbWVudCgpO1xuXG4gICAgLy9jb25zb2xlLmxvZyhjYXJkRWxlbWVudCk7XG4gICAgLy9UaGlzIHdpbGwgYWRkIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzIHdoZW4gdGhlIGNhcmQgaXMgY3JlYXRlZFxuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAvLzEtZ2V0IHRoZSBjYXJkIHZpZXdcbiAgICAvLzItc2V0IGV2ZW50IGxpc3RlbmVycy13ZSBhcmUgaW52b2tpbmcgYSBtZXRob2QsIHNvIHdlIGFyZSB1c2luZyB0aGlzXG4gICAgLy90aGVyZSB3aWxsIGJlIDMgZXZlbnQgbGlzdGVucnMsIGxpa2UgYnV0dG9uLCBkZWxldGUgYnV0dG9uLCBwcmV2aWV3IGltYWdlXG4gICAgLy8zLXJldHVybiB0aGUgY2FyZFxuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgLy9jcmVhdGUgY29uc3RydWN0b3IgYW5kIGNvcHkgZXZlcnl0aGluZyBmcm9tIHZhbGlkYXRlLmpzIGV4Y2VwdCBmb3JtU2VsZWN0b3Igc2luY2UgZm9ybUVsZW1lbnQgaXMgdXNlZCBpbnN0ZWFkXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuXG4gICAgLy90aGlzIHdpbGwgbG9nIHRoZSBDbGFzcyBpdHNlbGYqKipcbiAgICAvL2NvbnNvbGUubG9nKFwic2V0dGluZ3NcIiwgc2V0dGluZ3MpO1xuICAgIC8vY29uc29sZS5sb2coXCJ0ZXN0dGhpc1wiLCB0aGlzLl9pbnB1dEVsZW1lbnRzKTtcbiAgICBjb25zb2xlLmxvZyhcImZvcm1FbGVtZW50IGlzOiBcIiwgdGhpcy5fZm9ybSk7XG4gIH1cbiAgLy90aGlzIHdpbGwgYmFzaWNhbGx5IHRvZ2dsZSB0aGUgZXJyb3ItcmVmYWN0b3JlZCoqXG4gIC8vZm9ybUVsZW1lbnQgYmVjb21lcyB0aGlzLl9mb3JtXG4gIC8vKipJZiBpdHMgb24gdGhlIGNvbnN0cnVjdG9yIGluIHRoZSBtZXRob2RzLCBhZGQgdGhlICd0aGlzJyBrZXl3b3JkICovXG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIC8vY29uc29sZS5sb2coZXJyb3JNZXNzYWdlRWxlbWVudCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlOyAvL2Vycm9yTWVzc2FnZSA9aW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuICAvL25vdGUgdGhpcyBkb2VzIG5vdCBoYXZlIGFuIGVycm9yIG1lc3NhZ2UgcGFyYW1hdGVyLCBpdCBqdXN0IGhpZGVzIGl0XG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KFxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXG4gICAgKTtcbiAgfVxuICAvL3JlbW92ZSBzdWJtaXRidXR0b24saW5hY3RpdmVidXR0b25jbGFzcyBzaW5jZSBpdHMgYmVlbiBkZWZpbmVkIGluIHRoZSBjb25zdHJ1Y3RvclxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmVzZXRGb3JtKCkge1xuICAgIC8vIGlmIHlvdSB1cGRhdGUgdGhpcy5faW5wdXRFbGVtZW50cywgeW91IG1pZ2h0IGNoYW5nZSB0aGUgX3RvZ2dsZUJ1dHRvblN0YXRlIHNjZW5hcmlvXG4gICAgLy8gdGlwOiB5b3UgbmVlZCB0byBydW4gdGhpcyBmdW5jIHdoZW4geW91IG9wZW4gT1IgY2xvc2UgbW9kYWxcbiAgICAvL2NvbnNvbGUubG9nKFwidG9nZ2xlQnV0dG9uRFN0YXRlUHVibGljTWV0aG9kIFRlc3RpbmdcIik7XG4gICAgLy9jb25zdCBhZGRDYXJkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5mb3Jtc1tcImFkZC1jYXJkLWZvcm1cIl07XG4gICAgLy90aGlzLl9hZGRDYXJkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5mb3Jtc1tcImFkZC1jYXJkLWZvcm1cIl07XG4gICAgLy90aGlzLl9hZGRDYXJkRm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgICAvL3RoaXMuX2lucHV0U2VsZWN0b3IudGV4dENvbnRlbnQucmVzZXQoKTtcbiAgICAvL3RoaXMuX2lucHV0RWxlbWVudHMucmVzZXQoOylcbiAgICAvL3RoaXMuaW5wdXRFbGVtZW50LnJlc2V0KCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgfVxuXG4gIC8vcmVtb3ZlZCBwYXJhbXRlcnMgdGhhdCB3ZXJlIGRlY2xhcmVkIHdpdGhpbiB0aGlzIGNsYXNzIGFscmVhZHlcbiAgLy9pbnB1dEVsZW1lbnRzIGlzIHJlbW92ZWQgZnJvbSB0aGUgcGFyYW1ldGVycyBiLmMgaXRzIGRlY2xhcmVkIGV2ZW4gdGhvdWdoIGl0cyBub3QgaW4gdGhlIGNvbnRydWN0b3JcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIC8vY29uc29sZS5sb2coXCJ0ZXN0aW5nMTIxMVwiLCB0aGlzLl9zdWJtaXRCdXR0b24pO1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbGVtZW50cykpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9XG4gIC8vcmVtb3ZlIGV2ZXJ5dGhpbmcgZWR4Y2VwdCBpbnB1dGVsZW1lbnQgZnJvbSBwYXJhbWV0ZXJcbiAgLy9iL2MgaXQgYWxyZWFkeSBleGlzdHMgaW4gdGhlIGNvbnN0cnVjdG9yXG4gIC8vcmVmYWN0b3JlZCoqXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8vcmVtb3ZlIG9wdGlvbnMgc2luY2UgY29uc3RydWN0b3IgYWxyZWFkeSBoYXMgdGhlc2U/XG4gIC8vYWxsIGZ1bmN0aW9ucyBpbnNpZGUgbWV0aG9kcyBuZWVkIGEgdGhpcz9cbiAgLy9vbmx5IGFyZ3VtZW50IHRoYXQgaXMgbmVlZGVkIGluIGlucHV0RWxlbWVudFxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICAvL3RoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpOyAvL2NhbiByZW1vdmUgdGhlIHBhcmFtdGVycyBhbmQgYWRkIHRoaXMgc2luY2UgeW91IGFyZSBjYWxsaW5nIGl0IHdpdGhpbiB0aGUgY2xhc3NcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIC8vbmVlZCBpbnB1dEVsZW1lbnQgYXMgc3RhbmRhbG9uZVxuXG4gIC8vcHVibGljIG1ldGhvZCB0aGF0IGFjdGl2YXRlcyB0aGUgdmFsaWRhdGlvbiBvZiB0aGUgZ2VuZXJhdGVkIGZvcm1cbiAgLy9wbGF5cyB0aGUgcm9sZSBvZiBpbml0IG1ldGhvZCAoaXRzIHB1YmxpYylcbiAgLy9XaWxsIGJlIGNhbGxlZCBieSB0aGUgMiBmb3JtIG1ldGhvZHMgb24gaW5kZXguanNcbiAgLy9hbHNvIHJlbW92aW5nIHRoZSBsb29wcyBzaW5jZSB0aGF0IGlzIGhhbmRsZWQgaW4gaW5kZXguanMsIG9uY2UgcGVyIHVuaXF1ZSBmb3JtXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuXG4vL2NvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGVkaXRGb3JtKTtcbi8vZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuLy9jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGFkZEZvcm0pO1xuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiLy9wb3B1cFNlbGVjdG9yIGlkZW50aWZpZXMgd2hpY2ggcG9wdXAgd2UgYXJlIHdvcmtpbmcgd2l0aFxuLy93aWxsIGJlIHJlc3BvbnNpYmxlIGZvciBvcGVuaW5nL2Nsb3NpbmcgYWxsIHRoZSBwb3B1cHMgaW4geW91ciBhcHBsaWNhdGlvblxuLy90aGVzZSBhcmUgYWxyZWFkeSBkZWZpbmVkIGluIGluZGV4LmpzLWp1c3QgbmVlZCB0byBmaW5kIHRoZW1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICBjb25zb2xlLmxvZyhwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICAvL2xpc3RlbnMgZm9yIGVzYyBidXR0b25cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vc2V0cyBldmVudCBsaXN0ZW5lcnNcbiAgLy9jcmVhdGUgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIGNsaWNrIG9uIHRoZSBDTE9TRSBidXR0b24gb3IgcG9wdXAgaGFsZi10cmFuc3BhcmVudCBiYWNrZ3JvdW5kXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpIHx8XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCIvL2NoaWxkIGNsYXNzIG9mIHBvcHVwIGNsYXNzXG4vL3JlbWVtYmVyLXN1cGVyIHJlZmVycyB0byB0aGUgcGFyZW50IGNsYXNzXG4vL2NyZWF0ZSBpbnN0YW5jZSBvZiBQb3B1cFdpdGhGb3JtIGNsYXNzIGZvciBlYWNoIHBvcHVwIHRoYXQgY29udGFpbnMgYSBmb3JtXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZS1idXR0b25cIik7XG4gIH1cbiAgLy9jYW4gcmVtb3ZlIHRoaXMgMTMtMTZcbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIC8vY29sbGVjdHMgZGF0YSBmcm9tIGFsbCBpbnB1dCBmaWVsZHMgYW5kIHJldHVybnMgaXQgYXMgYW4gb2JqZWN0XG4gIC8vVGhpcyB3aWxsIGJlIHBhc3NlZCB0byB0aGUgc3VibWlzc2lvbiBoYW5kbGVyIGFzIGFuIGFyZ3VtZW50XG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBmb3JtRGF0YU9iaiA9IHt9OyAvL2NyZWF0ZSBlbXB0eSBvYmplY3RcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTsgLy9jYW4gcHJvYmFibHkgbW92ZSB0byBjb25zdHJ1Y3Rvcj9cbiAgICB0aGlzLl9pbnB1dFZhbHVlcy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGZvcm1EYXRhT2JqW2lucHV0RWxlbWVudC5uYW1lXSA9IGlucHV0RWxlbWVudC52YWx1ZTsgLy9hZGQgYSBmaWVsZG5hbWU6ZmllbGR2YWx1ZSBwYWlyIGFzIGFuIG9iamVjdFxuICAgIH0pO1xuICAgIHJldHVybiBmb3JtRGF0YU9iajsgLy9yZXR1cm5zIGRhdGEgYXMgYW4gb2JqZWN0XG4gIH1cblxuICAvL3B1YmxpYyBtZXRob2QgdGhhdCB3aWxsIGJlIHVzZWQgYnkgdGhlIHBvcHVwcyBpbiBpbmRleC5qc1xuICAvL3RvIGluZGlhdGUgaXQgaXMgJ3NhdmluZycgdGhlIGluZm9ybWF0aW9uIG9uIHRoZSBtb2RhbC9wb3B1cFxuICBzZXRMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICAgIH1cbiAgfVxuXG4gIC8vb3ZlcnJpZGVzIHNldEV2ZW50TGlzdGVuZXJzKCkgcGFyZW50IG1ldGhvZFxuICAvL1Nob3VsZCBhZGQgYSBzdWJtaXQgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGZvcm0gJiBjYWxsIHRoZSBzZXRFdmVudExpc3RlbmVycygpIG9mIHRoZSBwYXJlbnQgY2xhc3NcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gICAgLy9zdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbi8qaW5kZXguanNcblxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYWRkLWNhcmQtbW9kYWxcIiwgKCkgPT4ge30pO1xubmV3Q2FyZmRQb3B1cC5vcGVuKCk7XG5cbm5ld0NhcmZkUG9wdXAuY2xvc2UoKTsgKi9cbiIsIi8vU2VjdGlvbiBjbGFzcyBpcyBhIHV0aWxpdHkgY2xhc3MgdGhhdCBzZXJ2ZXMgYSBzcGVjaWZpYyBwdXJwb29zZVxuLy9wdXJwb3NlOiBhZGQgZWxlbWVudHMgdG8gdGhlIERPTVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyOyAvLyBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMvYWRkcyBzaW5nbGUgaXRlbSB0byBhIHBhZ2VcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTsgLy9DU1MgY2xhc3Mgc2VsZWN0b3IsIHdoZXJlIHlvdSBhZGQgdGhlIGNhcmQgZWxlbWVudHNcbiAgfVxuXG4gIC8vcmVuZGVycyBhbGwgdGhlIGVsZW1lbnRzIG9uIHRoZSBwYWdlXG4gIC8vY2FsbGVkIG9uY2UgcGVyIHBhZ2UgbG9hZFxuICAvL2lzIGl0ZW1zIHBhcmFtdGVyIG9wdGlvbnNhbD9cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICAvL3Rha2VzIERPTSBlbGVtZW50ICYgYWRkcyBpdCB0byB0aGUgY29udGFpbmVyXG4gIC8vKipzaG91bGQgYmUgY2FsbGVkIHdoZW4gYWRkaW5nIGFuIGluZGl2aWR1YWwgY2FyZCB0byB0aGUgRE9NICovXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIC8vY29uc29sZS5sb2coXCJlbGVtZW50IGlzOlwiICsgZWxlbWVudCk7XG4gIH1cbn1cbiIsIi8vMS1Jbml0aWFsIENhcmRzXG4vLzItU2V0dGluZ3MgT2JqZWN0XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZyBcIixcbiAgfSxcbl07XG5cbi8vc2V0dGluZ3Mgb2JqZWN0XG5cbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbi8vbW9kYWwgY29uZmlnLS0tLSBhZGQgY2FyZC8gZWRpdCBjYXJkLyBwcmV2aWV3IGltYWdlIGNhcmRcbmNvbnN0IG1vZGFsQ29uZmlnID0ge1xuICBlZGl0TW9kYWxGb3JtU2VsZWN0b3I6IFwiLmVkaXQtbW9kYWxcIixcbiAgYWRkTW9kYWxGb3JtU2VsZWN0b3I6IFwiLmVkaXQtbW9kYWxcIixcbiAgcHJldmlld01vZGFsRm9ybVNlbGVjdG9yOiBcIi5lZGl0LW1vZGFsXCIsXG59O1xuLy9wcm9maWxlIGNvbmZpZy0tdGFrZXMgaW4gMiBwcnBlcnR5IC0tcHJvZmlsZSBuYW1lIGFuZCBkZXNjcmlwdGlvbiBzZWxlY3Rvci0tLS1cbmNvbnN0IHByb2ZpbGVDb25maWcgPSB7XG4gIG5hbWVTZWxlY3RvcjogXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiLFxuICBkZXNjcmlwdGlvblNlbGVjdG9yOiBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIsXG59O1xuLy9jYXJkcyBjb25maWctLS1jb250YWluZXIgc2VsZWN0b3IvY2FyZCB0ZW1wbGF0ZSBzZWxlY3RvclxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFQSSBmcm9tIFwiLi4vY29tcG9uZW50cy9BUEkuanNcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgc2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuXG4vL1RoaXMgaXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIEFQSSBjbGFzc1xuY29uc3QgYXBpID0gbmV3IEFQSSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiN2QwNzg3NTctMjNlZC00MTRlLWE5ZDctZDYzYTYyNjljNzJjXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcbi8vY29uc29sZS5sb2coXCJ0ZXN0aW5nISEhXCIpO1xuLy9hcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigocmVzKSA9PiBjb25zb2xlLmxvZyhyZXMpKTtcbi8vYXBpLmdldFVzZXJJbmZvKCkudGhlbigocmVzKSA9PiBjb25zb2xlLmxvZyhcIlVzZXIgSW5mbyBpczogXCIsIHJlcykpO1xuXG5hcGlcbiAgLmdldFVzZXJJbmZvKClcbiAgLnRoZW4oKHJlcykgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwicmVzOlwiLCByZXMpO1xuICAgIGNvbnNvbGUubG9nKFwicmVzLm5hbWU6IFwiLCByZXMubmFtZSk7XG4gICAgY29uc29sZS5sb2coXCJyZXMuYWJvdXQ6IFwiLCByZXMuYWJvdXQpO1xuXG4gICAgLy91cGRhdGUgdGhlIGF2YXRhciB3aGVuIHlvdSByZWZyZXNoIHRoZSBwYWdlXG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihyZXMuYXZhdGFyKTtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMubmFtZSwgcmVzLmFib3V0KTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgYWxlcnQoYCR7ZXJyfWApO1xuICB9KTtcblxuLy8gYXBpLnVwZGF0ZVVzZXJJbmZvKHJlcykudGhlbigocmVzKSA9PiB7XG4vLyAgIGNvbnNvbGUubG9nKFwiVXNlciBJbmZvIGlzOiBcIiwgcmVzKTtcbi8vICAgVXNlckluZm8uc2V0VXNlckluZm8ocmVzLm5hbWUsIHJlcy5kZXNjcmlwdGlvbik7XG4vLyB9KTtcblxuLy9hcGkuZ2V0VXNlckluZm8oKS50aGVuKHVzZXJJbmZvKTsgLy89Pntcbi8vICAgY29uc29sZS5sb2coXCJUaGUgVXNlciBJbmZvIGlzIDpcIisgdXNlckluZm8pO1xuLy8gfVxuLy9DcmVhdGUgaW5zdGFuY2VzIG9mIHRoZSBjbGFzc2VzXG4vL2NvbnN0IENhcmRQcmV2aWV3ID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9ycy5wcmV2aWV3Q2FyZE1vZGFsKTtcblxuLy9jb25zb2xlLmxvZyh0eXBlb2YgaW5pdGlhbENhcmRzKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FyZC1DYXJkIENsYXNzICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLy9JbnN0YW50aWF0ZSBvciBtYWtlIGEgY29weSBvZiB0aGUgQ2FyZCBDbGFzcyBhbmQgcGFzcyBjYXJkRGF0YSBhbmQgdGhlIHRlbXBsYXRlIHRvIGl0XG4vL1RoZW4gY2FsbCBnZXRWaWV3KCkgbWV0aG9kIGZyb20gdGhlIGNsYXNzLSNjYXJkLXRlbXBsYXRlXG4vL2NvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbi8vY2FyZC5nZXRWaWV3KCk7XG4vL1dlIGFyZSBncmFiYmluZyB0aGUgdGVtcGxhdGVcbi8vY29uc3QgY2FyZFNlbGVjdG9yID0gXCIjY2FyZC10bXBsYXRlXCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbGlkYXRpb24tRm9ybSBWYWxpZGF0b3IgQ2xhc3MgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLy90aGVzZSBleGlzdCBhbHJlYWR5XG4vL2NvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1lZGl0LWZvcm1cIl07XG4vL2NvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmQtZm9ybVwiXTtcbi8qY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBwcm9maWxlRWRpdEZvcm1cbikgXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgYWRkQ2FyZEZvcm1FbGVtZW50XG4pOyAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXJkIFRlbXBsYXRlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuY29uc3QgY2FyZFRlbXBsYXRlID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xuY29uc3QgcHJldmlld0NhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1jYXJkLW1vZGFsXCIpO1xuY29uc3QgbW9kYWxQcmV2aWV3SW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIlxuKTtcblxuY29uc3QgcHJvZmlsZUVkaXRNb2RhbENsb3NlQnV0dG9uID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWwtY2xvc2UtYnV0dG9uXCJcbik7XG5cbmNvbnN0IGFkZENhcmRNb2RhbENsb3NlQnV0dG9uID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI2FkZC1jYXJkLW1vZGFsLWNsb3NlLWJ1dHRvblwiXG4pO1xuY29uc3QgcHJldmlld0NhcmRNb2RhbENsb3NlQnV0dG9uID0gcHJldmlld0NhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcmV2aWV3LWNhcmQtbW9kYWwtY2xvc2UtYnV0dG9uXCJcbik7XG5cbmNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcbi8vY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWVkaXQtZm9ybVwiXTtcbi8vY29uc3QgYWRkQ2FyZEZvcm1FbGVtZW50ID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBhZGRDYXJkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5mb3Jtc1tcImFkZC1jYXJkLWZvcm1cIl07XG5jb25zdCBhdmF0YXJFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYXZhdGFyLWVkaXQtZm9ybVwiXTtcbmNvbnNvbGUubG9nKGF2YXRhckVkaXRGb3JtKTtcbmNvbnN0IGNhcmRzV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gYWRkQ2FyZEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX3RpdGxlXCJcbik7XG5jb25zdCBjYXJkVVJMSW5wdXQgPSBhZGRDYXJkRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2lucHV0X3R5cGVfbGlua1wiXG4pO1xuXG4vKmNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59OyAqL1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsaWRhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vL0ZvciBib3RoIG9mIHRoZSBmb3Jtcywgd2UgYXJlIGNyZWF0aW5nIDMgZGlmZmVyZW50IHZhbGlkYXRvcnNcbi8vd2UgYXJlIGNyZWF0aW5nIDMgaW5zdGFuY2VzIG9mIEZvcm0gVmFsaWRhdG9ycyBpLmUuIG9uZSBmb3IgZWFjaCBwb3B1cCBmb3JtXG4vLzEtY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWVkaXQtZm9ybVwiXTsgYWxyZWFkeSBncmFiYmVkIHRoZSBjb25zdGFudFxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcHJvZmlsZUVkaXRGb3JtKTtcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbi8vY29uc3QgYWRkQ2FyZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJhZGQtY2FyZC1mb3JtXCJdO1xuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhZGRDYXJkRm9ybUVsZW1lbnQpO1xuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5jb25zdCBhdmF0YXJFZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhdmF0YXJFZGl0Rm9ybSk7XG5hdmF0YXJFZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qZnVuY3Rpb24gaGFuZGxlRXNjKGUpIHtcbiAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5lZFwiKTtcbiAgICAvL2NvbnNvbGUubG9nKG1vZGFsKTtcbiAgICAvLyBjbG9zZU1vZGFsKG1vZGFsKTtcbiAgfSBcbn0gKi9cblxuLypmdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjKTtcbiAgcmV0dXJuO1xufSAqL1xuXG4vKmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjKTtcbiAgcmV0dXJuO1xufSAqL1xuXG4vKmZ1bmN0aW9uIGhhbmRsZU92ZXJsYXkoZXZ0LCBtb2RhbCkge1xuICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcbiAgICBjb25zb2xlLmxvZyhcInRlc3RpbmcgMTIyNVwiKTtcbiAgICBjb25zb2xlLmxvZyhldnQudGFyZ2V0LmNsYXNzTGlzdCk7XG4gICAgY2xvc2VNb2RhbChtb2RhbCk7XG4gIH1cbn0gKi9cblxuLy8vU3RlcCAzLSBQcmV2aWV3IENhcmQgTW9kYWwgQ2xvc2luZyBFdmVudCBMaXN0ZW5lclxuLypwcmV2aWV3Q2FyZE1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gIC8vY29uc29sZS5sb2coZXZ0LnRhcmdldC5jbGFzc0xpc3QpO1xuICBoYW5kbGVPdmVybGF5KGV2dCwgcHJldmlld0NhcmRNb2RhbCk7XG59KTsgKi9cblxuLy8vU3RlcCAzLVByb2ZpbGUgRWRpdCBNb2RhbCBDbG9zaW5nIEV2ZW50IExpc3RlbmVyXG4vKnByb2ZpbGVFZGl0TW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgaGFuZGxlT3ZlcmxheShldnQsIHByb2ZpbGVFZGl0TW9kYWwpO1xufSk7ICovXG5cbi8vL1N0ZXAgMy1Qcm9maWxlIEFkZCBNb2RhbCBDbG9zaW5nIEV2ZW50IExpc3RlbmVyXG4vKmFkZENhcmRNb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2dCkge1xuICBoYW5kbGVPdmVybGF5KGV2dCwgYWRkQ2FyZE1vZGFsKTtcbn0pOyAqL1xuXG4vKmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcbiAgLy9jb25zdCBpbmZvID0gdWluZm8uZ2V0VXNlckluZm8oKTtcbiAgLy9jb25zb2xlLmxvZyhcImluZm86IFwiICsgaW5mbyk7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gcHJvZmlsZVRpdGxlLnRleHRDb250ZW50O1xuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgcmV0dXJuO1xufSAqL1xuLy9UaGlzIGlzIHdoZXJlIHdlIGluc3RhbnRpYXRlIHRoZSBjYXJkIGNsYXNzXG4vL2NhcmREYXRhIGlzIHtuYW1lLCBsaW5rfSwgaS5lLiBncmFiIHRoZSBzcGVjaWZpYyBkYXRhIGFuZCBwYXNzIGl0IHRvIGdldFZpZXcoKVxuLypmdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhLCB3cmFwcGVyKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXG4gICAgY2FyZERhdGEsXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIGhhbmRsZUltYWdlQ2xpY2tcbiAgKS5nZXRWaWV3KCk7XG4gIHdyYXBwZXIucHJlcGVuZChjYXJkRWxlbWVudCk7XG59ICovXG5cbi8vIGZ1bmN0aW9uIGhhbmRsZUNhcmREZWxldGVDbGljayhkYXRhKSB7XG4vLyAgIC8vY29uc29sZS5sb2coZGF0YSk7XG4vLyAgIGFwaS5kZWxldGVDYXJkKGRhdGEpO1xuLy8gfVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXG4gICAgY2FyZERhdGEsXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQ29uZmlybWF0aW9uLFxuICAgIC8vaGFuZGxlQ2FyZERlbGV0ZUNsaWNrXG4gICAgLy9oYW5kbGVBdmF0YXJFZGl0Rm9ybSxcbiAgICBoYW5kbGVDYXJkTGlrZVxuICApO1xuICByZXR1cm4gY2FyZEVsZW1lbnQuZ2V0VmlldygpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhLCB3cmFwcGVyKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gIC8vd3JhcHBlci5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG59XG5cbi8qXG4gY29uc3QgY29uZmlybWRlbGV0ZSBjbGljayA9IG5ldyBQb3B1cHdpdGhmb3JtKFxuICBwb3B1cHNlbGVjdG9yOlxuIClcbiovXG5cbi8vMS1maW5kIGRlbGV0ZSBidXR0b25cbi8vMi1hZGQgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGRlbGV0ZSBidXR0b25cbi8vMy10byByZW1vdmUgY2FyZC1jYWxsIG1ldGhvZCBvbiBodG1sIGVsZW1lbnQgKGNhcmRFbGVtZW50LnJlbW92ZSgpXG4vL2Z1bmN0aW9uIHByZXNzRGVsZXRlQnV0dG9uKGNhcmRFbGVtZW50KSB7XG4vLyBjb25zdCBkZWxldGVDYXJkRWxlbWVudCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2gtYnV0dG9uXCIpO1xuLy8gZGVsZXRlQ2FyZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgLy9jYXJkRWxlbWVudC5yZW1vdmUoXCJjYXJkXCIpO1xuLy8gICBjb25zb2xlLmxvZyhcIkl0cyBiZWVuIHJlbW92ZWQhXCIpO1xuLy8gICByZXR1cm47XG4vLyB9KTtcbi8vfVxuLy9mdW5jdGlvbiB0b2dnbGVMaWtlQnV0dG9uKGNhcmRFbGVtZW50KSB7XG4vL2NvbnN0IGxpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuLy9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuLy8gIGNvbnNvbGUubG9nKFwiUHJlc3MgTGlrZSBCdXR0b25cIik7XG4vLyAgcmV0dXJuO1xuLy99KTtcbi8vfVxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBQb3B1cFdpdGhGb3JtIEluaXRpYWxpemF0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmNvbnN0IG5ld0NhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNhZGQtY2FyZC1tb2RhbFwiLFxuICBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdFxuKTtcbm5ld0NhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxuKTtcbmVkaXRQcm9maWxlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLypPcGVuaW5nIHRoZSBQaWN0dXJlIE1vZGFsIFN0ZXBzOlxuIDEtY2FsbCB5b3VyIG9wZW5Nb2RhbCBmdW5jdGlvbiwgcGFzc2luZyBpdCB0aGUgbW9kYWwgYXMgYW4gYXJndW1lbnRcbiAyLXNldCB0aGUgc3JjIG9mIHBvcHVwIGltYWdlIGVsZW1lbnRcbiAzLXNldCB0aGUgYWx0IG9mIHBvcHVwIGltYWdlIGVsZW1lbnRcbiA0LXNldCB0aGUgdGV4dCBvZiBwb3B1cCBjYXB0aW9uIGVsZW1lbnQqL1xuLy9wcmV2aWV3Q2FyZEltYWdlIGlzIGNoYW5nZWQgdG8gaGFuZGxlSW1hZ2VDbGlja1xuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlldy1jYXJkLW1vZGFsXCIpO1xucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkRGF0YSkge1xuICBwb3B1cFdpdGhJbWFnZS5vcGVuKGNhcmREYXRhKTtcbiAgLy8gY29uc29sZS5sb2coY2FyZEltYWdlRWxlbWVudCk7XG4gIC8vIC8vY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAvLyBjb25zdCBtb2RhbENhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuICAvLyBvcGVuTW9kYWwocHJldmlld0NhcmRNb2RhbCk7XG4gIC8vIG1vZGFsUHJldmlld0ltYWdlRWxlbWVudC5zcmMgPSBjYXJkSW1hZ2VFbGVtZW50LnNyYztcbiAgLy8gbW9kYWxQcmV2aWV3SW1hZ2VFbGVtZW50LmFsdCA9IGNhcmRJbWFnZUVsZW1lbnQuYWx0O1xuICAvLyBtb2RhbENhcHRpb24udGV4dENvbnRlbnQgPSBjYXJkVGl0bGVFbGVtZW50LnRleHRDb250ZW50O1xuICAvLyByZXR1cm47XG4gIC8vIC8vfSk7XG59XG5cbi8qXG5MaW5lIDE6IENsb25lIHRoZSB0ZW1wbGF0ZSBlbGVtZW50IHdpdGggYWxsIGl0cyBjb250ZW50IGFuZCBzdG9yZSBpdCBpbiBhIGNhcmRFbGVtZW50IHZhcmlhYmxlXG5MaW5lIDIgJiAzOiBBY2Nlc3MgdGhlIGNhcmQgdGl0bGUgYW5kIGltYWdlIGFuZCBzdG9yZSB0aGVtIGluIHZhcmlhYmxlc1xuTGluZSA0OiBTZXQgdGhlIHBhdGggdG8gdGhlIGltYWdlIHRvIHRoZSBsaW5rIGZpZWxkIG9mIHRoZSBvYmplY3RcbkxpbmUgNTogU2V0IHRoZSBpbWFnZSBhbHQgdGV4dCB0byB0aGUgbmFtZSBmaWVsZCBvZiB0aGUgb2JqZWN0XG5MaW5lIDY6IFNldCB0aGUgY2FyZCB0aXRsZSB0byB0aGUgbmFtZSBmaWVsZCBvZiB0aGUgb2JqZWN0LCB0b29cblJldHVybiB0aGUgcmVhZHkgSFRNTCBlbGVtZW50IHdpdGggdGhlIGZpbGxlZC1pbiBkYXRhXG5ub3RlOiBjbG9uZU5vZGUoKSBtZXRob2QgY29waWVzIHRoZSBlbGVtZW50LCBidXQgZG9lc24ndCBhZGQgaXQgdG8gdGhlIERPTVxuaS5lLiB5b3UgaGF2ZSB0byBhcHBlbmQgaXRcbiovXG5cbi8vIGZpbmRpbmcgdGhlIGxpa2UgYnV0dG9uIGZvciB0aGUgY2FyZCB3ZSBhcmUgY3VycmVudGx5IGdlbmVyYXRpbmdcbi8vd2hlbiB3ZSByZXR1cm4gY2FyZGVsZW1lbnQsIGl0cyBhbHJlYWR5IHNldHVwIGZvciBhIGxpa2UvZGVsZXRlL3ByZXZpZXdjYXJkIGJ1dHRvbiB0aGF0IGlzIGxpc3RlbmluZyBmb3IgYSBjbGlja1xuLy9mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChjYXJkRGF0YSkge1xuLy9jb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4vL2NvbnN0IGNhcmRJbWFnZUVsZW1lbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuLy9jb25zdCBjYXJkVGl0bGVFbGVtZW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbi8vcHJlc3NEZWxldGVCdXR0b24oY2FyZEVsZW1lbnQpO1xuLy9wcmV2aWV3Q2FyZEltYWdlKGNhcmRJbWFnZUVsZW1lbnQsIGNhcmRUaXRsZUVsZW1lbnQpO1xuLy90b2dnbGVMaWtlQnV0dG9uKGNhcmRFbGVtZW50KTtcbi8vY2FyZEltYWdlRWxlbWVudC5zcmMgPSBjYXJkRGF0YS5saW5rO1xuLy9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IGNhcmREYXRhLm5hbWU7XG4vL2NhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xuLy9yZXR1cm4gY2FyZEVsZW1lbnQ7XG4vL31cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50IEhhbmRsZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcbiAgXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbiAgXCIucHJvZmlsZV9faW1hZ2VcIlxuKTtcblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcbiAgZWRpdFByb2ZpbGVNb2RhbC5zZXRMb2FkaW5nKHRydWUpO1xuICBjb25zb2xlLmxvZyhcImlucHV0VmFsdWVzOlwiLCBpbnB1dFZhbHVlcyk7XG4gIGFwaVxuICAgIC51cGRhdGVVc2VySW5mbyhpbnB1dFZhbHVlcylcbiAgICAudGhlbigoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICAgIC8vY29uc29sZS5sb2coXCJyZXM6XCIsIHJlcyk7XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKFwicmVzLm5hbWU6IFwiLCByZXMubmFtZSk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcInJlcy5hYm91dDogXCIsIHJlcy5hYm91dCk7XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKFwicmVzLmRlc2NyaXB0aW9uOiBcIiwgcmVzLmRlc2NyaXB0aW9uKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKDg4ODg4ODg4OCk7XG4gICAgICAvL1VzZXJJbmZvLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuZGVzY3JpcHRpb24pO1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMubmFtZSwgaW5wdXRWYWx1ZXMuYWJvdXQpO1xuICAgICAgZWRpdFByb2ZpbGVNb2RhbC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIGFsZXJ0KGAke2Vycn1gKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGVkaXRQcm9maWxlTW9kYWwuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59XG5cbi8vdXNlckluZm8uc2V0VXNlckluZm8ocHJvZmlsZVRpdGxlSW5wdXQudmFsdWUsIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlKTtcbi8vY29uc29sZS5sb2coXCJwcm9maWxlVGl0bGVJbnB1dC52YWx1ZTogXCIgKyBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSk7XG4vL3Byb2ZpbGVUaXRsZS50ZXh0Q29udGVudCA9IHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlO1xuLy9jb25zb2xlLmxvZyhcInByb2ZpbGVUaXRsZS50ZXh0Q29udGVudDpcIiArIHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudCk7XG4vL3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuLy8gY2FsbCB0aGUgLmNsb3NlKClcbi8vZWRpdFByb2ZpbGVNb2RhbC5jbG9zZSgpO1xuLy9jbG9zZU1vZGFsKHByb2ZpbGVFZGl0TW9kYWwpO1xuXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oKSB7XG4gIGNvbnN0IGluZm9PYmogPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICAvL2NvbnNvbGUubG9nKFwiaW5mbzogXCIgKyBpbmZvT2JqKTtcbiAgY29uc29sZS5sb2coXCJwcm9maWxlVGl0bGVJbnB1dC52YWx1ZTpcIiArIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlKTtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBpbmZvT2JqLm5hbWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gaW5mb09iai5kZXNjcmlwdGlvbjtcbiAgY29uc29sZS5sb2coXCJwcm9maWxlVGl0bGVJbnB1dC52YWx1ZTogXCIgKyBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSk7XG4gIC8vIGNvbnNvbGUubG9nKFxuICAvLyAgIFwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWU6IFwiICsgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWVcbiAgLy8gKTtcbiAgLy9wcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudDtcbiAgLy9wcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgcmV0dXJuO1xufVxuXG4vLyBmdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChlKSB7XG4vLyAgIGNvbnNvbGUubG9nKGUpO1xuLy8gICBjb25zdCBuYW1lID0gY2FyZFRpdGxlSW5wdXQudmFsdWU7XG4vLyAgIGNvbnN0IGxpbmsgPSBjYXJkVVJMSW5wdXQudmFsdWU7XG4vLyAgIHJlbmRlckNhcmQoeyBuYW1lLCBsaW5rIH0sIGNhcmRzV3JhcCk7XG4vLyAgIC8vY2xvc2VNb2RhbChhZGRDYXJkTW9kYWwpO1xuLy8gICBuZXdDYXJkTW9kYWwuY2xvc2UoKTtcbi8vICAgLy9hZGRGb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybSgpO1xuLy8gfVxuXG4vKmFwaSBwc2V1ZG9jb2RlOlxuMS1jcmVhdGUgdGhlIGNhcmRcbjItYWRkIHRoZSBjYXJkIHRvIHRoZSBET01cbjMtY2xvc2UgdGhlIHBvcHVwICovXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xuICBjb25zb2xlLmxvZygzMzMzMzMzLCBpbnB1dFZhbHVlcyk7XG4gIC8vZWRpdFByb2ZpbGVNb2RhbC5zZXRMb2FkaW5nKHRydWUpO1xuICBuZXdDYXJkTW9kYWwuc2V0TG9hZGluZyh0cnVlKTtcbiAgYXBpXG4gICAgLmFkZENhcmQoaW5wdXRWYWx1ZXMpXG4gICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xuICAgICAgLy9jb25zb2xlLmxvZyhjYXJkKTtcbiAgICAgIG5ld0NhcmRNb2RhbC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIGFsZXJ0KGAke2Vycn1gKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIG5ld0NhcmRNb2RhbC5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn1cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50IExpc3RlbmVycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vL3Byb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyBmaWxsUHJvZmlsZUZvcm0oKTtcbi8vIG9wZW5Nb2RhbCgpO1xuLy99KTtcblxuLy9wcm9maWxlRWRpdE1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlTW9kYWwpO1xuLy8gcHJvZmlsZUVkaXRNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuLy8gIGNsb3NlTW9kYWwocHJvZmlsZUVkaXRNb2RhbClcbi8vKTtcblxuLy8gRm9ybSBMaXN0ZW5lcnNcbi8vcHJvZmlsZUVkaXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQpO1xuLy9hZGRDYXJkRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCk7XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIC8vcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQ7XG4gIC8vcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XG4gIGZpbGxQcm9maWxlRm9ybSgpO1xuICAvLyBVc2UgLm9wZW4oKSBtZXRob2RcbiAgZWRpdFByb2ZpbGVNb2RhbC5vcGVuKCk7XG4gIC8vb3Blbk1vZGFsKHByb2ZpbGVFZGl0TW9kYWwpO1xufSk7XG5cbi8vYWRkIG5ldyBjYXJkIGJ1dHRvblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAvLyByZXNldCB0aGUgdmFsaWRhdGlvblxuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybSgpO1xuICAvLyBvcGVuIHRoZSBwb3B1cFxuICBuZXdDYXJkTW9kYWwub3BlbigpO1xufSk7XG5cbmFkZENhcmRNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAvL2Nsb3NlTW9kYWwoYWRkQ2FyZE1vZGFsKVxuICBuZXdDYXJkTW9kYWwuY2xvc2UoKVxuKTtcblxucHJldmlld0NhcmRNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAvL2Nsb3NlTW9kYWwocHJldmlld0NhcmRNb2RhbClcbiAgcG9wdXBXaXRoSW1hZ2UuY2xvc2UoKVxuKTtcblxuLypmb3IgKGxldCBpID0gMDsgaSA8IGluaXRpYWxDYXJkcy5sZW5ndGg7IGkrKykge1xuICBjb25zdCBjYXJkID0gaW5pdGlhbENhcmRzW2ldO1xufSBhbHRlcm5hdGl2ZSBpdGVyYXRpdmUgc3RhdGVtZW50IHRoYXQgY291bGQndmUgaGF2ZSBiZWVuIHVzZWQqL1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQ2FyZCBJbml0aWFsaXphdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLy9jb21tZW50IG91dCBsaW5lIDM2MyBiL2MgdGhlIFNlY3Rpb24gY2xhc3Mgd2lsbCBub3cgZG8gaXRcbi8vaW5zdGFudGlhdGluZyBpdCBvbmx5IHJ1bnMgdGhlIGNvbnN0cnVjdG9yXG4vL2luc2lkZSByZW5kZXJlci1jcmVhdGUgdGhlIGNhcmQgYW5kIHRoZW4gY2FsbCBzZWN0aW9uLmFkZCBpdGVtIGFuZCBwYXNzIGluIG5ldyBjYXJkXG5cbi8vIGNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4vLyAgIHtcbi8vICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuLy8gICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbi8vICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkRGF0YSkpO1xuLy8gICAgIH0sXG4vLyAgIH0sXG4vLyAgIFwiLmNhcmRzX19saXN0XCJcbi8vICk7XG4vLyBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG4vL2RlY2xhcmUgdGhlIHZhcmlhYmxlIGNhcmRTZWN0aW9uLCBidXQgaXRzIHZhbHVlIGlzIHVuZGVmaW5lZFxuLy93ZSBkZWZpbmUgaXQgbW9tZW50cyBsYXRlci4uLlxubGV0IGNhcmRTZWN0aW9uO1xuYXBpXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxuICAudGhlbigoY2FyZHMpID0+IHtcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICBpdGVtczogY2FyZHMsXG4gICAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoY2FyZERhdGEpKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBcIi5jYXJkc19fbGlzdFwiXG4gICAgKTtcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICBhbGVydChgJHtlcnJ9YCk7XG4gIH0pO1xuXG5jb25zdCBkZWxldGVDb25maXJtYXRpb25Nb2RhbCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXG4gIFwiI2RlbGV0ZS1jb25maXJtYXRpb24tbW9kYWxcIlxuKTtcbmRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vMS1vcGVuIHRoZSBkZWxldGUgY29uZmlybWF0aW9uIG1vZGFsXG4vLzItY2FsbCB0aGUgbW9kYWwncyAgc2V0U3VibWl0QWN0aW9uIChpdHMgYSBwdWJsaWMgbWV0aG9kKVxuLy8zLWNhbGwgdGhlIEFQSSB0byBkZWxldGUgdGhlIGNhcmQgZnJvbSB0aGUgc2VydmVyXG4vLzQtaWYgdGhlIEFQSSBpcyBzdWNjZXNzZnVsbCwgaXQgd2lsbCBkZWxldGUgZnJvbSBzZXJ2ZXIsIG1ha2Ugc3VyZSB0byBkZWxldGUgbG9jYWxseSBhbHNvXG4vLzUtY2xvc2UgdGhlIG1vZGFsXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDb25maXJtYXRpb24oY2FyZCkge1xuICBkZWxldGVDb25maXJtYXRpb25Nb2RhbC5vcGVuKCk7XG4gIGRlbGV0ZUNvbmZpcm1hdGlvbk1vZGFsLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgZGVsZXRlQ29uZmlybWF0aW9uTW9kYWwuc2V0TG9hZGluZyh0cnVlKTtcbiAgICBhcGlcbiAgICAgIC5kZWxldGVDYXJkKGNhcmQuX2lkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLmhhbmRsZURlbGV0ZUNhcmQoKTtcblxuICAgICAgICBkZWxldGVDb25maXJtYXRpb25Nb2RhbC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgYWxlcnQoYCR7ZXJyfWApO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgZGVsZXRlQ29uZmlybWF0aW9uTW9kYWwuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfSk7XG59XG5cbi8vRWRpdCBQcm9maWxlIEF2YXRhci1Qc2V1ZG9jb2RlOlxuLy8xLUdyYWIgdGhlIGVkaXRJY29uIGJ1dHRvbiBjbGFzcyAmIHRoZW4gYWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGl0XG4vLzItQWRkIGV2ZW50IGxpc3RuZXIgd2l0aCAgXCJjbGlja1wiLCB0aGUgZWRpdCBwb3B1cCBhdmF0YXIgZm9ybSBzaG91bGQgb3BlblxuLy8zLUluc3RhbnRpYXRlIHRoZXcgZWRpdEF2YXRhclBvcHVwIGZvcm0gdXNpbmcgdGhlIGNsYXNzIFBvcHVwV2l0aEZvcm1cblxuY29uc3QgZWRpdEF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdGljb25cIik7XG5lZGl0QXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwieW91IGNsaWNrZWQgb24gZWRpdEF2YXRhckJ1dHRvblwiKTtcbiAgZWRpdEF2YXRhclBvcHVwLm9wZW4oKTtcbn0pO1xuXG5jb25zdCBlZGl0QXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjZWRpdC1hdmF0YXItbW9kYWxcIixcbiAgaGFuZGxlQXZhdGFyRWRpdEZvcm1cbik7XG5lZGl0QXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyRWRpdEZvcm0oaW5wdXRWYWx1ZXMpIHtcbiAgLy8vXG4gIC8vY29uc29sZS5sb2coXCJoaVwiKTtcbiAgZWRpdEF2YXRhclBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XG4gIC8vY29uc29sZS5sb2coXCJfZ2V0SW5wdXRWYWx1ZXM6IFwiLCBfZ2V0SW5wdXRWYWx1ZXMudXJsKTtcbiAgYXBpXG4gICAgLnNldFVzZXJBdmF0YXIoaW5wdXRWYWx1ZXMudXJsKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwicmVzOlwiLCByZXMpO1xuICAgICAgY29uc29sZS5sb2coXCJfZ2V0SW5wdXRWYWx1ZXMudXJsOlwiLCBpbnB1dFZhbHVlcy51cmwpO1xuICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihpbnB1dFZhbHVlcy51cmwpO1xuXG4gICAgICBlZGl0QXZhdGFyUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICBhbGVydChgJHtlcnJ9YCk7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBlZGl0QXZhdGFyUG9wdXAuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59XG4vL0VkaXQgUHJvZmlsZSBBdmF0YXItUHNldWRvY29kZTovLy8vLy8vLy8vLy8vLy8vL1xuXG4vL0hhbmRsZSBDYXJkIExpa2UgUHNldWRvY29kZS0tLVxuLy8gaWYgY2FyZCBpcyB3aGl0ZSAobm90IGxpa2VkKSB0aGVuXG4vLyAgdGhlIGFwaS51cGRhdGVMaWtlIGlzIGNhbGxlZFxuLy9lbHNlIHRoZSBoZWFydCBpcyBibGFjay8oaWtlZCBhbHJlYWR5KVxuLy90aGVuIGFkZCB0aGUgYXBpIHRvIHJlbW92ZSB0aGUgbGlrZVxuLy8/PyBkbyBJIHBhc3MgY2FyZCBhcyBwYXJhbWV0ZXI/IG9yIGJ5cGFzcyBpdCBhbmQgdXNlICd0aGlzJ1xuLy9zaW5jZSB0aGV5IGxvb2sgdGhlIHNhbWU/IGkuZSBvdXRwdXQgaXMgdGhlIHNhbWVcbmZ1bmN0aW9uIGhhbmRsZUNhcmRMaWtlKGNhcmQpIHtcbiAgY29uc29sZS5sb2coXCJ0ZXN0aW5nIExpa2UgMTIzIVwiKTtcbiAgY29uc29sZS5sb2coXCJ0aGlzOlwiLCB0aGlzKTtcbiAgY29uc29sZS5sb2coXCJjYXJkIGlzIGxpa2VkOlwiLCBjYXJkLl9pc0xpa2VkKTtcbiAgY29uc29sZS5sb2coXCJjYXJkIGlzIHVubGlrZWQ6XCIsICFjYXJkLl9pc0xpa2VkKTtcbiAgY29uc29sZS5sb2coXCJ0aGlzLl9uYW1lOlwiLCB0aGlzLl9uYW1lLCBcInRoaXMuX2lzTGlrZWQ6XCIsIHRoaXMuX2lzTGlrZWQpO1xuICBpZiAoIWNhcmQuX2lzTGlrZWQpIHtcbiAgICBhcGlcbiAgICAgIC5zZXRMaWtlZChjYXJkLl9pZClcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJyZXM6XCIsIHJlcyk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVzLmlzTGlrZWQ6XCIsIHJlcy5pc0xpa2VkKTtcbiAgICAgICAgY2FyZC5zZXRJc0xpa2VkKHJlcy5pc0xpa2VkKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIGFsZXJ0KGAke2Vycn1gKTtcbiAgICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGFwaVxuICAgICAgLnJlbW92ZUxpa2UoY2FyZC5faWQpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVzXCIsIHJlcyk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicmVzLmlzTGlrZWQ6XCIsIHJlcy5pc0xpa2VkKTtcbiAgICAgICAgY2FyZC5zZXRJc0xpa2VkKHJlcy5pc0xpa2VkKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIGFsZXJ0KGAke2Vycn1gKTtcbiAgICAgIH0pO1xuICB9XG59XG5cbi8vSXRlcmF0ZSB0aHJvdWdoIHRoZSBjYXJkIGRhdGEgdGhhdCB3ZSBpbml0aWFsbHkgaGF2ZSBhbmRcbi8vcnVuIHRoZSBmdW5jdGlvbiBnZXRDYXJkRWxlbWVudCBvbiBlYWNoIGluZGV4XG4vL2luaXRpYWxDYXJkcy5mb3JFYWNoKChjYXJkRGF0YSkgPT4gcmVuZGVyQ2FyZChjYXJkRGF0YSwgY2FyZHNXcmFwKSk7XG5cbi8qY29uc3QgbGlrZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xubGlrZUJ1dHRvbnMuZm9yRWFjaCgobGlrZUJ1dHRvbikgPT4ge1xuICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9KTtcbn0pOyAqL1xuXG5jb25zb2xlLmxvZyhcInRlc3Rpbmc5OFwiKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFQSSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICAvL1RoaXMgd2lsbCBoYW5kbGUgZmV0Y2ggcmVxdWVzdHNcbiAgX2hhbmRsZVJlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfVxuICB9XG5cbiAgLy9HRVQgL3VzZXJzL21lIOKAkyBHZXQgdGhlIGN1cnJlbnQgdXNlcuKAmXMgaW5mb1xuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy9HRVQgL2NhcmRzIOKAkyBHZXQgYWxsIGNhcmRzXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy9QQVRDSCAvdXNlcnMvbWUg4oCTIFVwZGF0ZSB5b3VyIHByb2ZpbGUgaW5mb3JtYXRpb25cbiAgdXBkYXRlVXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBhYm91dCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy81LVBPU1QgL2NhcmRzIOKAkyBDcmVhdGUgYSBjYXJkXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy9pbiBwcm9ncmVzcyoqKipcbiAgLy82LURFTEVURSAvY2FyZHMvOmNhcmRJZCDigJMgRGVsZXRlIGEgY2FyZFxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy9QQVRDSCAvdXNlcnMvbWUvYXZhdGFyIOKAkyBVcGRhdGUgYXZhdGFyXG4gIC8vYXZhdGFyRGF0YS1wcm9wZXJ0eSBzaG91bGQgY29udGFpbiBhIGxpbmsgdG8gdGhlIG5ldyBwcm9maWxlIHBpY3R1cmVcbiAgc2V0VXNlckF2YXRhcih1cmwpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IHVybCB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vNy1QVVQgL2NhcmRzLzpjYXJkSWQvbGlrZXMg4oCTIExpa2UgYSBjYXJkXG4gIHNldExpa2VkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8vOC1ERUxFVEUgL2NhcmRzLzpjYXJkSWQvbGlrZXMg4oCTIERpc2xpa2UgYSBjYXJkXG4gIHJlbW92ZUxpa2UoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgLy8gb3RoZXIgbWV0aG9kcyBmb3Igd29ya2luZyB3aXRoIHRoZSBBUElcbiAgLy8xKi1HRVQgL3VzZXJzL21lIOKAkyBHZXQgdGhlIGN1cnJlbnQgdXNlcuKAmXMgaW5mb1xuICAvLzIqLVBBVENIIC91c2Vycy9tZSDigJMgVXBkYXRlIHlvdXIgcHJvZmlsZSBpbmZvcm1hdGlvblxuICAvLzMqLVBBVENIIC91c2Vycy9tZS9hdmF0YXIg4oCTIFVwZGF0ZSBhdmF0YXJcbiAgLy80Ki1HRVQgL2NhcmRzIOKAkyBHZXQgYWxsIGNhcmRzXG4gIC8vNSotUE9TVCAvY2FyZHMg4oCTIENyZWF0ZSBhIGNhcmRcbiAgLy82Ki1ERUxFVEUgL2NhcmRzLzpjYXJkSWQg4oCTIERlbGV0ZSBhIGNhcmRcbiAgLy83Ki1QVVQgL2NhcmRzLzpjYXJkSWQvbGlrZXMg4oCTIExpa2UgYSBjYXJkXG4gIC8vOCotREVMRVRFIC9jYXJkcy86Y2FyZElkL2xpa2VzIOKAkyBEaXNsaWtlIGEgY2FyZFxuXG4gIC8vIHdoZW4gd2UgY2FsbCBhIGpzIGZpbGUsIHRoaXMgc2hvdWxkIGJlIGNhbWVDYXNlXG4gIC8vIEJVVFxuICAvLyB3aGVuIHlvdSBuYW1lIGEgUmVhY3QgY29tcG9uZW50IGlzIHNob3VsZGJlIFBhc2NhbENhc2Vcbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICBjb25zb2xlLmxvZyhcIlBvcHVwU2VsZWN0b3IgaXM6IFwiLCBwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9fcHJldmlldy1pbWFnZVwiXG4gICAgKTtcbiAgICAvL3RoaXMuX2NhcmRUaXRsZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICB0aGlzLl9tb2RhbENhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIGNvbnNvbGUubG9nKFwibW9kYWwgQ2FwdGlvblwiKTtcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQpO1xuICAgIC8vY29uc29sZS5sb2codGhpcy5fbW9kYWxDYXB0aW9uLnRleHRDb250ZW50KTtcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMuX21vZGFsQ2FwdGlvbi50ZXh0Q29udGVudCk7XG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSBkYXRhLm5hbWU7IC8vYEltYWdlICR7ZGF0YS5saW5rfWA7XG4gICAgdGhpcy5fbW9kYWxDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIGNvbnNvbGUubG9nKHRoaXMuX21vZGFsQ2FwdGlvbi50ZXh0Q29udGVudCk7XG4gICAgY29uc29sZS5sb2coXCJ0aGUgYWx0IHRleHQgaXM6XCIsIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0KTtcblxuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuXG4vKlxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJyNwcmV2aWV3LWNhcmQtbW9kYWwnKVxucG9wdXBXaXRoSW1nYWdlLnNldEV2ZW50TGlzdG5lcnMoKVxuXG5jb25zdCBwb3B1cFdpdGhGb3JtMT0gbmV3IFBvcHVwV2l0aEZvcm0oJyNhZGQtY2FyZC1tb2RhbCcpXG5cbmNvbnN0IHBvcHVwV2l0aEZvcm0xPSBuZXcgUG9wdXBXaXRoRm9ybSgnI3Byb2ZpbGUtZWRpdC1tb2RhbCcpXG4qL1xuIiwiLy9Vc2VySW5mbyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIGluZm9ybWF0aW9uIGFib3V0IHRoZSB1c2VyIG9uIHRoZSBwYWdlXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IocHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHRleHQgY29udGVudCBvZiB0aGUgcHJvZmlsZSBlbGVtZW50c1xuICAgKiBtZXRob2QgaXMgaGFuZHkgd2hlbiBpdHMgbmVjZXNzYXJ5IHRvIGRpc3BsYXkgdGhlIHVzZXIgZGF0YSBpbiB0aGUgb3BlbiBmb3JtXG4gICAqL1xuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIC8vdGFrZXMgbmV3IHVzZXIgZGF0YSAmIGFkZHMgaXQgdG8gdGhlIHBhZ2VcbiAgLy9tZXRob2QgaXMgdXNlZCBhZnRlciBzdWNjZXNzZnVsIHN1Ym1pc3Npb24gb2YgdGhlIHByb2ZpbGUgZm9ybVxuICBzZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xuICB9XG5cbiAgLy9zZXQgdGhlIG5ldyBhdmF0YXIgYXMgdGhlIHByb2ZpbGUgaW1hZ2VcbiAgc2V0VXNlckF2YXRhcihhdmF0YXIpIHtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xuICB9XG59XG5cbi8vXG4vL2NvbnN0IHVzZXJpbmZvICA9IG5ldyB1c2VyaW5mbygnLnByZm9pZV9fdGl0bGUsICcucHJvZmlsZS0tZGVzY2lycHQpXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiKTtcbiAgfVxuXG4gIC8vdGhpcyB3aWxsIGJlIGNhbGxlZCBmcm9tIGluZGV4LmpzIChwdWJsaWMgbWV0aG9kKVxuICBzZXRTdWJtaXRBY3Rpb24oaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIC8vIHNldCB0aGUgc3VibWl0IGhhbmRsZXJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XG4gICAgICAvL3RoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldExvYWRpbmcoaXNMb2FkaW5nKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJEZWxldGluZy4uLlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlllc1wiO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlQ2FyZERlbGV0ZUNsaWNrIiwiaGFuZGxlQ2FyZExpa2UiLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9pc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUNhcmREZWxldGVDbGljayIsIl9oYW5kbGVDYXJkTGlrZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiY29uc29sZSIsImxvZyIsIl9jYXJkSW1hZ2UiLCJjaGFuZ2VMaWtlQnV0dG9uU3RhdGUiLCJfbGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInNldElzTGlrZWQiLCJoYW5kbGVEZWxldGVDYXJkIiwiX2dldEVsZW1lbnQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiX2NhcmRUaXRsZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50Iiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dEVsZW1lbnRzIiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2Rpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJyZXNldEZvcm0iLCJyZXNldCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiZm9ybURhdGFPYmoiLCJfaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsInNldExvYWRpbmciLCJpc0xvYWRpbmciLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImZvcm1TZWxlY3RvciIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9oYW5kbGVSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsImdldEluaXRpYWxDYXJkcyIsInVwZGF0ZVVzZXJJbmZvIiwiX3JlZjIiLCJhYm91dCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkQ2FyZCIsIl9yZWYzIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsInNldFVzZXJBdmF0YXIiLCJ1cmwiLCJhdmF0YXIiLCJzZXRMaWtlZCIsInJlbW92ZUxpa2UiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJhbGVydCIsImZpcnN0RWxlbWVudENoaWxkIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlRWRpdE1vZGFsIiwiYWRkQ2FyZE1vZGFsIiwicHJldmlld0NhcmRNb2RhbCIsImFkZENhcmRNb2RhbENsb3NlQnV0dG9uIiwicHJldmlld0NhcmRNb2RhbENsb3NlQnV0dG9uIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlRWRpdEZvcm0iLCJmb3JtcyIsImFkZENhcmRGb3JtRWxlbWVudCIsImF2YXRhckVkaXRGb3JtIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJjcmVhdGVDYXJkIiwiY2FyZERhdGEiLCJoYW5kbGVEZWxldGVDb25maXJtYXRpb24iLCJuZXdDYXJkTW9kYWwiLCJpbnB1dFZhbHVlcyIsImNhcmQiLCJjYXJkU2VjdGlvbiIsImZpbmFsbHkiLCJlZGl0UHJvZmlsZU1vZGFsIiwicG9wdXBXaXRoSW1hZ2UiLCJfY2FyZEltYWdlRWxlbWVudCIsIl9tb2RhbENhcHRpb24iLCJkYXRhIiwicHJvZmlsZU5hbWVTZWxlY3RvciIsInByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWVFbGVtZW50IiwiX3Byb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQiLCJfYXZhdGFyIiwiZGVzY3JpcHRpb24iLCJpbmZvT2JqIiwiZmlsbFByb2ZpbGVGb3JtIiwiY2FyZHMiLCJkZWxldGVDb25maXJtYXRpb25Nb2RhbCIsInNldFN1Ym1pdEFjdGlvbiIsImVkaXRBdmF0YXJQb3B1cCJdLCJzb3VyY2VSb290IjoiIn0=